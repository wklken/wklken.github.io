<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="Python通用数据格式转换工具">
<meta itemprop="description" content="已独立成项目在github上面 dataformat 涉及模块 os, getopt, sys 需求 在进行hadoop测试时，需要造大量数据，例如某个表存在56列，但实际程序逻辑只适用到某几"><meta itemprop="datePublished" content="2011-12-10T08:00:00+08:00" />
<meta itemprop="dateModified" content="2011-12-10T08:00:00+08:00" />
<meta itemprop="wordCount" content="2832">
<meta itemprop="keywords" content="python," /><meta property="og:title" content="Python通用数据格式转换工具" />
<meta property="og:description" content="已独立成项目在github上面 dataformat 涉及模块 os, getopt, sys 需求 在进行hadoop测试时，需要造大量数据，例如某个表存在56列，但实际程序逻辑只适用到某几" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wklken.me/posts/2011/12/10/python-dataformat.html" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-12-10T08:00:00+08:00" />
<meta property="article:modified_time" content="2011-12-10T08:00:00+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python通用数据格式转换工具"/>
<meta name="twitter:description" content="已独立成项目在github上面 dataformat 涉及模块 os, getopt, sys 需求 在进行hadoop测试时，需要造大量数据，例如某个表存在56列，但实际程序逻辑只适用到某几"/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Python通用数据格式转换工具</title>
	<link rel="stylesheet" href="https://wklken.me/css/style.min.037b6ee8f8c1baab6a3d0a9da11c3ff18a7552471f16c59fd98538d5ce99208b.css" integrity="sha256-A3tu6PjBuqtqPQqdoRw/8Yp1UkcfFsWf2YU41c6ZIIs=" crossorigin="anonymous">
	
	<link rel="stylesheet" href="https://wklken.me/css/custom.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://wklken.me">WKLKEN THINKING</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://wklken.me/posts.html">Posts</a>
				<a href="https://wklken.me/about.html">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="https://github.com/wklken" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a href="https://twitter.com/wklken" target="_blank" rel="noopener me" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://wklken.me/posts.html">Posts</a></li>
			<li><a href="https://wklken.me/about.html">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Dec 10, 2011</span></div>
				<h1>Python通用数据格式转换工具</h1>
			</header>
			<div class="content">
				<hr>
<p>已独立成项目在github上面 <a href="https://github.com/wklken/dataformat">dataformat</a></p>
<hr>
<p>涉及模块 os, getopt, sys</p>
<h3 id="需求">需求<a href="#需求" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>在进行hadoop测试时，需要造大量数据，例如某个表存在56列，但实际程序逻辑只适用到某几列，我们造的数据 也只需要某几列</p>
<p>构造几列数据，转化为对应数据表格式</p>
<h3 id="源代码">源代码<a href="#源代码" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-
#dataformat.py
#   wklken@yeah.net
#this script change data from your source to the dest data format
#2011-08-05 created version0.1
#2011-10-29 add row-row mapping ,default row value .rebuild all functions. version0.2 
#next:add data auto generate by re expression
#2011-12-17 add new functions, add timestamp creator.  version0.3
#2012-03-08 rebuild functions. version0.4
#2012-06-22 add function to support multi output separators
#2012-07-11 fix bug  line 44,add if
#2012-09-03 rebuild functions,add help msg! version0.5
#2012-11-08 last version edited by lingyue.wkl
#           this py: https://github.com/wklken/pytools/blob/master/data_process/dataformat.py

import os
import sys
import getopt
import time
import re

#read file and get each line without \n
def read_file(path):
    f = open(path, &quot;r&quot;)
    lines = f.readlines()
    f.close()
    return [line[:-1] for line in lines ]

#处理一行，转为目标格式，返回目标行
def one_line_proc(parts, total, ft_map, outsp, empty_fill, fill_with_sno):
    outline = []
    #step1.获取每一列的值
    for i in range(1, total + 1):
        if i in ft_map:
            fill_index = ft_map[i]
            #加入使用默认值列  若是以d开头，后面是默认，否则取文件对应列 done
            if fill_index.startswith(&quot;d&quot;):
                #列默认值暂不开启时间戳处理
                outline.append(fill_index[1:])
            else:
                outline.append(handler_specal_part(parts[int(fill_index) - 1]))
        else:
            #-s 选项生效，填充列号
            if fill_with_sno:
                outline.append(str(i))
            #否则，填充默认填充值
            else:
                outline.append(empty_fill)

    #step2.组装加入输出分隔符，支持多分隔符
    default_outsp = outsp.get(0,&quot;\t&quot;)
    result = []
    outsize = len(outline)
    for i in range(outsize):
        result.append(outline[i])
        if i &lt; outsize - 1:
            result.append(outsp.get(i + 1, default_outsp))
    #step3.拼成一行返回
    return ''.join(result)

#处理入口，读文件，循环处理每一行，写出
#输入数据分隔符默认\t,输出数据默认分隔符\t
def process(inpath, total, to, outpath, insp, outsp, empty_fill, fill_with_sno, error_line_out):
    ft_map = {}
    #有效输入字段数（去除默认值后的）
    in_count = 0
    used_row = []
    #step1-3相当于数据预处理，解析传入选项

    #step1 处理映射列 不能和第二步合并
    for to_row in to:
        if r&quot;\:&quot; not in to_row and len(to_row.split(&quot;:&quot;)) == 2:
            used_row.append(int(to_row.split(&quot;:&quot;)[1]))
        if r&quot;\=&quot; not in str(to_row) and len(str(to_row).split(&quot;=&quot;)) == 2:
            pass
        else:
            in_count += 1

    #step2 处理默认值列
    for to_row in to:
        #处理默认值列
        if r&quot;\=&quot; not in str(to_row) and len(str(to_row).split(&quot;=&quot;)) == 2:
            ft_map.update({int(to_row.split(&quot;=&quot;)[0]): &quot;d&quot;+to_row.split(&quot;=&quot;)[1]})
            continue
        #处理列列映射
        elif r&quot;\:&quot; not in to_row and len(to_row.split(&quot;:&quot;)) == 2:
            ft_map.update({int(to_row.split(&quot;:&quot;)[0]): to_row.split(&quot;:&quot;)[1]})
            continue
        #其他普通列
        else:
            to_index = 0
            for i in range(1, total + 1):
                if i not in used_row:
                    to_index = i
                    break
            ft_map.update({int(to_row): str(to_index)})
            used_row.append(to_index)

    #setp3 处理输出分隔符   outsp  0=\t,1=    0代表默认的，其他前面带列号的代表指定的
    if len(outsp) &gt; 1 and len(outsp.split(&quot;,&quot;)) &gt; 1:
        outsps = re.findall(r&quot;\d=.+?&quot;, outsp)
        outsp = {}
        for outsp_kv in  outsps:
            k,v = outsp_kv.split(&quot;=&quot;)
            outsp.update({int(k): v})
    else:
        outsp = {0: outsp}

    #step4 开始处理每一行
    lines = read_file(inpath)
    f = open(outpath, &quot;w&quot;)
    result = []
    for line in lines:
        #多个输入分隔符情况，使用正则切分成列
        if len(insp.split(&quot;|&quot;)) &gt; 0:
            parts = re.split(insp, line)
        #否则使用正常字符串切分成列
        else:
            parts = line.split(insp)

        #正常的，切分后字段数大于等于配置的选项个数
        if len(parts) &gt;= in_count:
            outline = one_line_proc(parts, total, ft_map, outsp, empty_fill, fill_with_sno)
            result.append(outline + &quot;\n&quot;)
        #不正常的，列数少于配置
        else:
            #若配置了-e 输出，否则列数不符的记录过滤
            if error_line_out:
                result.append(line + &quot;\n&quot;)

    #step5 输出结果
    f.writelines(result)
    f.close()

#特殊的处理入口，处理维度为每一行,目前只有时间处理
def handler_specal_part(part_str):
    #timestamp 时间处理
    #时间列，默认必须 TS数字=时间
    if part_str.startswith(&quot;TS&quot;) and &quot;=&quot; in part_str:
        ts_format = {8: &quot;%Y%m%d&quot;,
                     10: &quot;%Y-%m-%d&quot;,
                     14: &quot;%Y%m%d%H%M%S&quot;,
                     19: &quot;%Y-%m-%d %H:%M:%S&quot;}
        to_l = 0
        #step1 确认输出的格式 TS8 TS10 TS14 TS19
        if part_str[2] != &quot;=&quot;:
            to_l = int(part_str[2:part_str.index(&quot;=&quot;)])

        part_str = part_str.split(&quot;=&quot;)[1].strip()
        interval = 0
        #step2 存在时间+-的情况 确认加减区间
        if &quot;+&quot; in part_str:
            inputdate = part_str.split(&quot;+&quot;)[0].strip()
            interval = int(part_str.split(&quot;+&quot;)[1].strip())
        elif &quot;-&quot; in part_str:
            parts = part_str.split(&quot;-&quot;)
            if len(parts) == 2: #20101020 - XX
                inputdate = parts[0].strip()
                interval = -int(parts[1].strip())
            elif len(parts) == 3: #2010-10-20
                inputdate = part_str
            elif len(parts) == 4: #2010-10-20 - XX
                inputdate = &quot;-&quot;.join(parts[:-1])
                interval = -int(parts[-1])
            else:
                inputdate = part_str
        else:
            inputdate = part_str.strip()
        #step3 将原始时间转为目标时间
        part_str = get_timestamp(inputdate, ts_format, interval)

        #step4 如果定义了输出格式，转换成目标格式，返回
        if to_l &gt; 0:
            part_str = time.strftime(ts_format.get(to_l), time.localtime(int(part_str)))
    return part_str

#将时间由秒转化为目标格式
def get_timestamp(inputdate, ts_format, interval=0):
    if &quot;now()&quot; in inputdate:
        inputdate = time.strftime(&quot;%Y%m%d%H%M%S&quot;) 
    inputdate = inputdate.strip()
    try:
        size = len(inputdate)
        if size in ts_format:
            ts = time.strptime(inputdate, ts_format.get(size))
        else:
            print &quot;the input date and time expression error,only allow 'YYYYmmdd[HHMMSS]' or 'YYYY-MM-DD HH:MM:SS'  &quot;
            sys.exit(0)
    except:
        print &quot;the input date and time expression error,only allow 'YYYYmmdd[HHMMSS]' or 'YYYY-MM-DD HH:MM:SS'  &quot;
        sys.exit(0)
    return str(int(time.mktime(ts)) + interval)

#打印帮助信息
def help_msg():
    print(&quot;功能：原数据文件转为目标数据格式&quot;)
    print(&quot;选项:&quot;)
    print(&quot;\t -i inputfilepath  [必输，input, 原文件路径]&quot;)
    print(&quot;\t -t n              [必输，total, n为数字，目标数据总的域个数]&quot;)
    print(&quot;\t -a '1,3,4'        [必输，array, 域编号字符串，逗号分隔。指定域用原数据字段填充，未指定用'0'填充]&quot;)
    print(&quot;\t                          -a '3,5=abc,6:2'  第5列默认值abc填充,第6列使用输入的第1列填充，第3列使用输入第1列填充&quot;)
    print(&quot;\t -o outputfilepath [可选，output, 默认为 inputfilepath.dist ]&quot;)
    print(&quot;\t -F 'FS'           [可选，field Sep，原文件域分隔符，默认为\\t,支持多分隔符，eg.'\t||\|' ]&quot;)
    print(&quot;\t -P 'OFS'          [可选，out FS，输出文件的域分隔符，默认为\\t,可指定多个，多个需指定序号=分隔符,逗号分隔,默认分隔符序号0 ]&quot;)
    print(&quot;\t -f 'fill_str'     [可选，fill，未选列的填充值，默认为空 ]&quot;)
    print(&quot;\t -s                [可选，serial number,当配置时，-f无效，使用列号填充未指派的列]&quot;)
    print(&quot;\t -e                [可选，error, 源文件列切分不一致行/空行/注释等，会被直接输出，正确行按原逻辑处理]&quot;)
    sys.exit(0)

#判断某个参数必须被定义
def must_be_defined(param, map, error_info):
    if param not in map:
       print error_info
       sys.exit(1)

#程序入口，读入参数，执行
def main():
    #init default value
    insp = &quot;\t&quot;
    outsp = &quot;\t&quot;
    empty_fill = ''
    fill_with_sno = False
    error_line_out = False
    #handle options
    try:
        opts,args = getopt.getopt(sys.argv[1:],&quot;F:P:t🅰️i⭕f:hse&quot;)

        for op,value in opts:
          if op in (&quot;-h&quot;, &quot;-H&quot;, &quot;--help&quot;):
            help_msg()
          if op == &quot;-i&quot;:
            inpath = value
          elif op == &quot;-o&quot;:
            outpath = value
          elif op == &quot;-t&quot;:
            total = int(value)
          elif op == &quot;-a&quot;:
            to = value.split(&quot;,&quot;)
          elif op == &quot;-F&quot;:
            insp = value.decode(&quot;string_escape&quot;)
          elif op == &quot;-P&quot;:
            outsp = value.decode(&quot;string_escape&quot;)
          elif op == &quot;-f&quot;:
            empty_fill = value
          elif op == &quot;-s&quot;:
            fill_with_sno = True
          elif op == &quot;-e&quot;:
            error_line_out = True
        if len(opts) &lt; 3:
          print(sys.argv[0]+&quot; : the amount of params must great equal than 3&quot;)
          print(&quot;Command : ./dataformat.py -h&quot;)
          sys.exit(1)

    except getopt.GetoptError:
        print(sys.argv[0]+&quot; : params are not defined well!&quot;)
        print(&quot;Command : ./dataformat.py -h&quot;)
        sys.exit(1)

    params_map = dir()

    must_be_defined('inpath', params_map, sys.argv[0]+&quot; : -i param is needed,input file path must define!&quot;)
    must_be_defined('total', params_map, sys.argv[0]+&quot; : -t param is needed,the fields of result file must define!&quot;)
    must_be_defined('to', params_map, sys.argv[0]+&quot; : -a param is needed,must assign the field to put !&quot;)

    if not os.path.exists(inpath):
        print(sys.argv[0]+&quot; file : %s is not exists&quot;%inpath)
        sys.exit(1)

    if 'outpath' not in dir():
        outpath = inpath+&quot;.dist&quot;

    process(inpath, total, to, outpath, insp, outsp, empty_fill, fill_with_sno, error_line_out)

if __name__ ==&quot;__main__&quot;:
    main()
</code></pre>
<h3 id="使用说明">使用说明<a href="#使用说明" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>功能：可指定输入分隔，输出分隔，无配置字段填充，某列默认值,可按顺序填充，也可乱序映射填充</p>
<p>输入：输入文件路径</p>
<p>选项：</p>
<pre><code>-i “path”
必设
输入文件路径

-t n
必设
目标数据表总列数

-a “r1,r2”
必设
将要填充的列号列表，可配置默认值，可配置映射

-o “path”
可选
输出文件路径，默认为 输入文件路径.dist

-F “IFS”
可选
输入文件中字段域分隔符，默认\t

-P ”OFS”
可选
输出文件中字段域分隔符，默认\t

-f “”
可选
指定未配置列的填充内容，默认为空

-h
单独
查看帮助信息
</code></pre>
<p>列填充的配置示例：</p>
<p>普通用法【最常用】</p>
<p>命令：</p>
<pre><code>./dataformat.py –i in_file –t 65 -a “22,39,63” –F “^I” –P “^A” –f “0”
</code></pre>
<p>说明：</p>
<pre><code>in_file中字段是以\t分隔的[可不配-F,使用默认]。
将in_file的第1,2,3列分别填充到in_file.dist[use default]的第22,39,63列
in_file.dist共65列，以^A分隔，未配置列以0填充
-a中顺序与源文件列序有关，若-a “39,22,63” 则是将第1列填充到第39列，第二列填充到22列，第3列填充到63列
</code></pre>
<p>列默认值用法:【需要对某些列填充相同的值，但不想在源文件中维护】</p>
<p>命令:</p>
<pre><code>./dataformat.py -i in_file –t 30 –a “3=tag_1,9,7,12=0.0” –o out_file
</code></pre>
<p>说明:</p>
<pre><code>in_file以\t分隔，输出out_file以\t分隔
将in_file的第1列,第2列填充到out_file的第9列，第7列
out_file共30列，第3列均用字符串”tag_1”填充，第12列用0.0填充，其他未配置列为空
注意：默认值 的取值，若是使用到等号和冒号，需转义，加 \= \:
</code></pre>
<p>列列乱序映射：</p>
<p>命令:</p>
<pre><code>./dataformat.py –i in_file –t 56 –a “3:2,9,5:3,1=abc,11”
</code></pre>
<p>说明:</p>
<pre><code>分隔，输入，输出，同上…..
冒号前面为输出文件列号，后面为输入文件列号
目标文件第3列用输入文件第2列填充，目标文件第5列用输入文件第3列填充
目标文件第一列均填充“abc”
目标文件第9列用输入文件第1列填充，第11列用输入文件第4列填充【未配置映射，使用从头开始还没有被用过的列】
脚本会对简单的字段数量等映射逻辑进行检测，复杂最好全配上，使用默认太抽象
</code></pre>
<p>代码托管位置  <a href="https://github.com/wklken/pytools/blob/master/data_process/dataformat.py">链接</a></p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://wklken.me/tags/python">python</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>2832 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2011-12-10 08:00 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc">
			<div class="toc-title">Table of Contents</div>
			<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#需求">需求</a></li>
        <li><a href="#源代码">源代码</a></li>
        <li><a href="#使用说明">使用说明</a></li>
      </ul>
    </li>
  </ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://wklken.me/posts/2011/12/10/python-ftp-ftplib.html">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Python实现ftp常用操作[ftplib]</span>
			</a>
			<a class="prev-post" href="https://wklken.me/posts/2011/06/18/summary-01-leaveschool.html">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>虽有遗憾，不曾后悔——写在离校之前</span>
			</a>
		</div>
		<div id="comments" class="thin">
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://wklken.me/js/md5.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: '549d325e74a413f1b56a',
    clientSecret: '086a83faacf152cc3f4079f002058716879e9688',
    repo: 'wklken.github.io',
    owner: 'wklken',
    admin: ['wklken'],
    id: md5(location.pathname), 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>

</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2022 <a href="https://wklken.me">wklken</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://wklken.me/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="https://wklken.me/js/bundle.min.580988ed2982bcbb74a1773c7abea97b43e4c43b9324e10cda0813ec6ec4bb67.js" integrity="sha256-WAmI7SmCvLt0oXc8er6pe0PkxDuTJOEM2ggT7G7Eu2c=" crossorigin="anonymous"></script>
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-42275748-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>

</html>
