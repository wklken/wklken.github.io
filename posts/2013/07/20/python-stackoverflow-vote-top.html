<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="[翻译整理]stackoverflow python 百问">
<meta itemprop="description" content="更新到github了，地址：https://github.com/wklken/stackoverflow-py-top-qa 后续这里不更新"><meta itemprop="datePublished" content="2013-07-20T08:00:00+08:00" />
<meta itemprop="dateModified" content="2013-07-20T08:00:00+08:00" />
<meta itemprop="wordCount" content="12491">
<meta itemprop="keywords" content="python,translation," /><meta property="og:title" content="[翻译整理]stackoverflow python 百问" />
<meta property="og:description" content="更新到github了，地址：https://github.com/wklken/stackoverflow-py-top-qa 后续这里不更新" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wklken.me/posts/2013/07/20/python-stackoverflow-vote-top.html" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-07-20T08:00:00+08:00" />
<meta property="article:modified_time" content="2013-07-20T08:00:00+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[翻译整理]stackoverflow python 百问"/>
<meta name="twitter:description" content="更新到github了，地址：https://github.com/wklken/stackoverflow-py-top-qa 后续这里不更新"/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>[翻译整理]stackoverflow python 百问</title>
	<link rel="stylesheet" href="https://wklken.me/css/style.min.037b6ee8f8c1baab6a3d0a9da11c3ff18a7552471f16c59fd98538d5ce99208b.css" integrity="sha256-A3tu6PjBuqtqPQqdoRw/8Yp1UkcfFsWf2YU41c6ZIIs=" crossorigin="anonymous">
	
	<link rel="stylesheet" href="https://wklken.me/css/custom.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://wklken.me">WKLKEN THINKING</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://wklken.me/posts.html">Posts</a>
				<a href="https://wklken.me/about.html">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="https://github.com/wklken" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a href="https://twitter.com/wklken" target="_blank" rel="noopener me" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://wklken.me/posts.html">Posts</a></li>
			<li><a href="https://wklken.me/about.html">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Jul 20, 2013</span></div>
				<h1>[翻译整理]stackoverflow python 百问</h1>
			</header>
			<div class="content">
				<p>更新到github了，地址：https://github.com/wklken/stackoverflow-py-top-qa</p>
<p>后续这里不更新了哈</p>
<hr>
<p>进度40%，最近有点犯懒</p>
<p>刚刚注册，好东西</p>
<p>查看了下前面(vote前15页,挑了下,vote都是100+的样子,大概120个)的问题，<a href="http://stackoverflow.com/questions/tagged/python?page=1&amp;sort=votes&amp;pagesize=15">链接</a>, 大体梳理了下,本来想放一页搞定，奈何排版太乱，按类型分了下</p>
<p>第一页的前几个比较长，目测都有中文翻译版本，大家可以网上搜下</p>
<p>其他问题相对比较杂，有些简单，有些复杂，拉过来参考参考也不错</p>
<p>总结整理，复习印证(注意，合并了每个问题的多个答案，但是时间仓促，疏漏难免，感兴趣问题直接点链接看原文吧)</p>
<hr>
<h2 id="基本数据结构列表元组字典等">基本数据结构(列表，元组，字典等)<a href="#基本数据结构列表元组字典等" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="判断一个列表为空得最佳实践">判断一个列表为空得最佳实践<a href="#判断一个列表为空得最佳实践" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/53513/python-what-is-the-best-way-to-check-if-a-list-is-empty">链接</a></p>
<p>答案:</p>
<pre><code>if not a:
    print &quot;List is empty&quot;
#不要用len(a)来判断
</code></pre>
<h3 id="为什么是stringjoinlist而不是listjoinstring">为什么是string.join(list)而不是list.join(string)<a href="#为什么是stringjoinlist而不是listjoinstring" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/493819/python-join-why-is-it-string-joinlist-instead-of-list-joinstring">链接</a></p>
<pre><code>my_list = [&quot;Hello&quot;, &quot;world&quot;]
print &quot;-&quot;.join(my_list)
#为什么不是 my_list.join(&quot;-&quot;) 。。。。这个....
</code></pre>
<p>答案：</p>
<p>因为所有可迭代对象都可以被连接，但是连接者总是字符串</p>
<h3 id="如何合并两个列表">如何合并两个列表<a href="#如何合并两个列表" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1720421/merge-two-lists-in-python">链接</a></p>
<pre><code>listone = [1,2,3]
listtwo = [4,5,6]
#outcome we expect: mergedlist == [1, 2, 3, 4, 5, 6]
</code></pre>
<p>1.不考虑顺序（原来问题不是很明确）</p>
<pre><code>listone + listtwo
#linstone.extend(listtwo)也行，就是会修改listone
</code></pre>
<p>2.考虑顺序做些处理</p>
<pre><code>&gt;&gt;&gt; listone = [1,2,3]
&gt;&gt;&gt; listtwo = [4,5,6]
&gt;&gt;&gt; import itertools
&gt;&gt;&gt; for item in itertools.chain(listone, listtwo):
...     print item
...
1
2
3
4
5
6
</code></pre>
<h3 id="如何扁平一个二维数组">如何扁平一个二维数组<a href="#如何扁平一个二维数组" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python">链接</a></p>
<pre><code>l = [[1,2,3],[4,5,6], [7], [8,9]]
变为[1, 2, 3, 4, 5, 6, 4, 5, 6, 7, 8, 9]
</code></pre>
<p>列表解析</p>
<pre><code>[item for sublist in l for item in sublist]
</code></pre>
<p>itertools</p>
<pre><code>&gt;&gt;&gt; import itertools
&gt;&gt;&gt; list2d = [[1,2,3],[4,5,6], [7], [8,9]]
&gt;&gt;&gt; merged = list(itertools.chain(*list2d))

# python &gt;= 2.6
&gt;&gt;&gt; import itertools
&gt;&gt;&gt; list2d = [[1,2,3],[4,5,6], [7], [8,9]]
&gt;&gt;&gt; merged = list(itertools.chain.from_iterable(list2d))
</code></pre>
<p>sum</p>
<pre><code>sum(l, [])
</code></pre>
<h3 id="如何获取一个列表的长度">如何获取一个列表的长度<a href="#如何获取一个列表的长度" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/518021/getting-the-length-of-an-array-in-python">链接</a></p>
<p>python中是不是只有这种方法可以获取长度？语法很奇怪</p>
<pre><code>arr.__len__()
</code></pre>
<p>应该使用这种方式</p>
<pre><code>mylist = [1,2,3,4,5]
len(mylist)
</code></pre>
<p>这样做法，不需要对每个容器都定义一个.length()方法，你可以使用len()检查所有实现了__len__()方法的对象</p>
<h3 id="python中如何复制一个列表">Python中如何复制一个列表<a href="#python中如何复制一个列表" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/2612802/how-to-clone-a-list-in-python">链接</a></p>
<p>可以用切片的方法</p>
<pre><code>new_list = old_list[:]
</code></pre>
<p>可以使用list()函数</p>
<pre><code>new_list = list(old_list)
</code></pre>
<p>可以使用copy.copy(),比list()稍慢，因为它首先去查询old_list的数据类型</p>
<pre><code>import copy
new_list = copy.copy(old_list)
</code></pre>
<p>如果列表中包含对象，可以使用copy.deepcopy(), 所有方法中最慢，但有时候无法避免</p>
<pre><code>import copy
new_list = copy.deepcopy(old_list)
</code></pre>
<p>例子：</p>
<pre><code>import copy

class Foo(object):
    def __init__(self, val):
         self.val = val

    def __repr__(self):
        return str(self.val)

foo = Foo(1)

a = ['foo', foo]
b = a[:]
c = list(a)
d = copy.copy(a)
e = copy.deepcopy(a)

# edit orignal list and instance
a.append('baz')
foo.val = 5

print &quot;original: %r\n slice: %r\n list(): %r\n copy: %r\n deepcopy: %r&quot; \
       % (a, b, c, d, e)
</code></pre>
<p>结果:</p>
<pre><code>original: ['foo', 5, 'baz']
slice: ['foo', 5]
list(): ['foo', 5]
copy: ['foo', 5]
deepcopy: ['foo', 1]
</code></pre>
<p>效率简单比较</p>
<pre><code>10.59 - copy.deepcopy(old_list)
10.16 - pure python Copy() method copying classes with deepcopy
1.488 - pure python Copy() method not copying classes (only dicts/lists/tuples)
0.325 - for item in old_list: new_list.append(item)
0.217 - [i for i in old_list] (a list comprehension)
0.186 - copy.copy(old_list)
0.075 - list(old_list)
0.053 - new_list = []; new_list.extend(old_list)
0.039 - old_list[:] (list slicing)
</code></pre>
<h3 id="列表的append和extend的区别">列表的append和extend的区别<a href="#列表的append和extend的区别" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/252703/python-append-vs-extend">链接</a></p>
<pre><code>&gt;&gt;&gt; x = [1, 2]
&gt;&gt;&gt; x.append(3)
&gt;&gt;&gt; x
[1, 2, 3]
&gt;&gt;&gt; x.append([4,5])
&gt;&gt;&gt; x
[1, 2, 3, [4, 5]]
&gt;&gt;&gt;
&gt;&gt;&gt; x = [1, 2, 3]
&gt;&gt;&gt; x.extend([4, 5])
&gt;&gt;&gt; x
[1, 2, 3, 4, 5]
</code></pre>
<h3 id="如何随机地从列表中抽取变量">如何随机地从列表中抽取变量<a href="#如何随机地从列表中抽取变量" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/306400/how-do-i-randomly-select-an-item-from-a-list-using-python">链接</a></p>
<pre><code>foo = ['a', 'b', 'c', 'd', 'e']
from random import choice
print choice(foo)
</code></pre>
<h3 id="如何利用下标从列表中删除一个元素">如何利用下标从列表中删除一个元素<a href="#如何利用下标从列表中删除一个元素" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/627435/how-to-remove-an-element-from-a-list-by-index-in-python">链接</a></p>
<p>1.del</p>
<pre><code>In [9]: a = range(10)
In [10]: a
Out[10]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
In [11]: del a[-1]
In [12]: a
Out[12]: [0, 1, 2, 3, 4, 5, 6, 7, 8]
</code></pre>
<p>2.pop</p>
<pre><code>a = ['a', 'b', 'c', 'd']
a.pop(1)
# now a is ['a', 'c', 'd']

a = ['a', 'b', 'c', 'd']
a.pop()
# now a is ['a', 'b', 'c']
</code></pre>
<h3 id="获取列表的最后一个元素">获取列表的最后一个元素<a href="#获取列表的最后一个元素" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/930397/how-to-get-the-last-element-of-a-list">链接</a></p>
<p>囧</p>
<pre><code>result = l[-1]
result = l.pop()
</code></pre>
<h3 id="序列的切片操作">序列的切片操作<a href="#序列的切片操作" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/509211/the-python-slice-notation">链接</a></p>
<p>It&rsquo;s pretty simple really:
很简单:</p>
<pre><code>a[start:end] # start 到 end-1
a[start:]    # start 到 末尾
a[:end]      # 0 到 end-1
a[:]         # 整个列表的拷贝
</code></pre>
<p>还有一个step变量，控制步长,可在上面语法中使用</p>
<pre><code>a[start🔚step] # start through not past end, by step
</code></pre>
<p>注意，左闭右开</p>
<p>其他特点，开始或结束下标可能是负数，表示从序列末尾开始计算而非从头开始计算,所以</p>
<pre><code>a[-1]    # 最后一个元素
a[-2:]   # 最后两个元素
a[:-2]   # 除了最后两个元素
</code></pre>
<p>Python对程序员很友好，如果序列中存在的元素数量少于你要的，例如，你请求 a[:-2] 但是a只有一个元素，你会得到一个空列表，而不是一个错误.有时候你或许希望返回的是一个错误，所以你必须知道这点</p>
<h3 id="如何将一个列表切分成若干个长度相同的子序列">如何将一个列表切分成若干个长度相同的子序列<a href="#如何将一个列表切分成若干个长度相同的子序列" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python">链接</a></p>
<p>想要得到这样的效果</p>
<pre><code>l = range(1, 1000)
print chunks(l, 10) -&gt; [ [ 1..10 ], [ 11..20 ], .., [ 991..999 ] ]
</code></pre>
<p>使用yield:</p>
<pre><code>def chunks(l, n):
    &quot;&quot;&quot; Yield successive n-sized chunks from l.
    &quot;&quot;&quot;
    for i in xrange(0, len(l), n):
        yield l[i:i+n]
list(chunks(range(10, 75), 10))
</code></pre>
<p>直接处理</p>
<pre><code>def chunks(l, n):
    return [l[i:i+n] for i in range(0, len(l), n)]
</code></pre>
<h3 id="使用列表解析创建一个字典">使用列表解析创建一个字典<a href="#使用列表解析创建一个字典" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1747817/python-create-a-dictionary-with-list-comprehension">链接</a></p>
<p>python 2.6</p>
<pre><code>d = dict((key, value) for (key, value) in sequence)
</code></pre>
<p>python 2.7+ or 3, 使用 <a href="http://www.python.org/dev/peps/pep-0274/">字典解析语法</a></p>
<pre><code>d = {key: value for (key, value) in sequence}
</code></pre>
<h3 id="使用in还是has_key">使用&quot;in&quot;还是&quot;has_key()&quot;<a href="#使用in还是has_key" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1323410/has-key-or-in">链接</a></p>
<pre><code>d = {'a': 1, 'b': 2}
'a' in d
True
or:

d = {'a': 1, 'b': 2}
d.has_key('a')
True
</code></pre>
<p>哪种更好</p>
<p>in更pythonic, 另外 has_key()在Python3.x中已经被移除</p>
<h3 id="字典默认值">字典默认值<a href="#字典默认值" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1602934/check-if-a-given-key-already-exists-in-a-dictionary">链接</a></p>
<p>和问题有点偏</p>
<pre><code>#获取时,如不存在，得到默认值
d.get(key, 0)
#设置时，若key不存在，设置默认值，已存在，返回已存在value
d.setdefault(key, []).append(new_element)
#初始即默认值
from collections import defaultdict
d = defaultdict(lambda: 0)
#or d = defaultdict(int)
</code></pre>
<h3 id="如何给字典添加一个值">如何给字典添加一个值<a href="#如何给字典添加一个值" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1024847/add-to-a-dictionary-in-python">链接</a></p>
<pre><code>#### Making a dictionary ####
data = {}
# OR #
data = dict()

#### Initially adding values ####
data = {'a':1,'b':2,'c':3}
# OR #
data = dict(a=1, b=2, c=3)

#### Inserting/Updating value ####
data['a']=1  # updates if 'a' exists, else adds 'a'
# OR #
data.update({'a':1})
# OR #
data.update(dict(a=1))

#### Merging 2 dictionaries ####
data.update(data2)  # Where data2 is also a dict.
</code></pre>
<h3 id="如何将字段转换成一个object然后使用对象-属性的方式读取">如何将字段转换成一个object，然后使用对象-属性的方式读取<a href="#如何将字段转换成一个object然后使用对象-属性的方式读取" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1305532/convert-python-dict-to-object">链接</a></p>
<p>有dict</p>
<pre><code>&gt;&gt;&gt; d = {'a': 1, 'b': {'c': 2}, 'd': [&quot;hi&quot;, {'foo': &quot;bar&quot;}]}}
</code></pre>
<p>想用这种方式访问</p>
<pre><code>&gt;&gt;&gt; x = dict2obj(d)
&gt;&gt;&gt; x.a
1
&gt;&gt;&gt; x.b.c
2
&gt;&gt;&gt; x.d[1].foo
bar
</code></pre>
<p>使用namedtuple</p>
<pre><code>&gt;&gt;&gt; from collections import namedtuple
&gt;&gt;&gt; MyStruct = namedtuple('MyStruct', 'a b d')
&gt;&gt;&gt; s = MyStruct(a=1, b={'c': 2}, d=['hi'])
&gt;&gt;&gt; s
MyStruct(a=1, b={'c': 2}, d=['hi'])
&gt;&gt;&gt; s.a
1
&gt;&gt;&gt; s.b
{'c': 2}
&gt;&gt;&gt; s.c
&gt;&gt;&gt; s.d
['hi']
</code></pre>
<p>使用类</p>
<pre><code>class Struct:
    def __init__(self, **entries):
        self.__dict__.update(entries)

&gt;&gt;&gt; args = {'a': 1, 'b': 2}
&gt;&gt;&gt; s = Struct(**args)
&gt;&gt;&gt; s
&lt;__main__.Struct instance at 0x01D6A738&gt;
&gt;&gt;&gt; s.a
1
&gt;&gt;&gt; s.b
2
</code></pre>
<h2 id="字符串文件">字符串，文件<a href="#字符串文件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="字符如何转为小写">字符如何转为小写<a href="#字符如何转为小写" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/6797984/how-to-convert-string-to-lowercase-in-python">链接</a></p>
<pre><code>s = &quot;Kilometer&quot;
print(s.lower())
</code></pre>
<h3 id="如何创建不存在的目录结构">如何创建不存在的目录结构<a href="#如何创建不存在的目录结构" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/273192/python-best-way-to-create-directory-if-it-doesnt-exist-for-file-write">链接</a></p>
<pre><code>if not os.path.exists(directory):
    os.makedirs(directory)
</code></pre>
<p>需要注意的是，当目录在exists和makedirs两个函数调用之间被创建时，makedirs将抛出OSError</p>
<h3 id="如何拷贝一个文件">如何拷贝一个文件<a href="#如何拷贝一个文件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/123198/how-do-i-copy-a-file-in-python">链接</a></p>
<p><a href="http://docs.python.org/2/library/shutil.html">shutil</a>模块</p>
<pre><code>copyfile(src, dst)
</code></pre>
<p>将src文件内容拷贝到dst，目标文件夹必须可写，否则将抛出IOError异常</p>
<p>如果目标文件已存在，将被覆盖</p>
<p>另外特殊文件，想字符文件，块设备文件，无法用这个方法进行拷贝</p>
<p>src/dst是字符串</p>
<h3 id="字符串转为floatint">字符串转为float/int<a href="#字符串转为floatint" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>&gt;&gt;&gt; a = &quot;545.2222&quot;
&gt;&gt;&gt; float(a)
545.2222
&gt;&gt;&gt; int(a)
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
ValueError: invalid literal for int() with base 10: '545.2222'
&gt;&gt;&gt; int(float(a))
545
&gt;&gt;&gt; int('544')
544
</code></pre>
<p>另一种，用 <a href="http://docs.python.org/2/library/ast.html#ast.literal_eval">ast</a>模块</p>
<pre><code>&gt;&gt;&gt; import ast
&gt;&gt;&gt; ast.literal_eval(&quot;545.2222&quot;)
545.2222
&gt;&gt;&gt; ast.literal_eval(&quot;31&quot;)
31
</code></pre>
<h3 id="如何反向输出一个字符串">如何反向输出一个字符串<a href="#如何反向输出一个字符串" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/931092/reverse-a-string-in-python">链接</a></p>
<p>做法</p>
<pre><code>&gt;&gt;&gt; 'hello world'[::-1]
'dlrow olleh'
</code></pre>
<h3 id="如何随机生成大写字母和数字组成的字符串">如何随机生成大写字母和数字组成的字符串<a href="#如何随机生成大写字母和数字组成的字符串" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>6U1S75
4Z4UKK
U911K4
</code></pre>
<p>解决</p>
<pre><code>import string, random
''.join(random.choice(string.ascii_uppercase + string.digits) for x in range(N))
</code></pre>
<h3 id="逐行读文件去除换行符perl-chomp-line">逐行读文件去除换行符(perl chomp line)<a href="#逐行读文件去除换行符perl-chomp-line" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/275018/how-can-i-remove-chomp-a-newline-in-python">链接</a>
类似问题 <a href="http://stackoverflow.com/questions/761804/trimming-a-string-in-python">链接</a></p>
<p>读一个文件，如何获取每一行内容（不包括换行符）</p>
<p>比较pythonic的做法:</p>
<pre><code>&gt;&gt;&gt; text = &quot;line 1\nline 2\r\nline 3\nline 4&quot;
&gt;&gt;&gt; text.splitlines()
['line 1', 'line 2', 'line 3', 'line 4']
</code></pre>
<p>用rstrip,(rstrip/lstrip/strip)</p>
<pre><code>#去除了空白+换行
&gt;&gt;&gt; 'test string \n'.rstrip()
'test string'
#只去换行
&gt;&gt;&gt; 'test string \n'.rstrip('\n')
'test string '
#更通用的做法，系统相关
&gt;&gt;&gt; import os, sys
&gt;&gt;&gt; sys.platform
'linux2'
&gt;&gt;&gt; &quot;foo\r\n&quot;.rstrip(os.linesep)
'foo\r'
</code></pre>
<h3 id="python中字符串的contains">python中字符串的contains<a href="#python中字符串的contains" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/3437059/does-python-have-a-string-contains-method">链接</a></p>
<p>python中字符串判断contains</p>
<p>使用in关键字</p>
<pre><code>if not &quot;blah&quot; in somestring: continue
if &quot;blah&quot; not in somestring: continue
</code></pre>
<p>使用字符串的find/index  (注意index查找失败抛异常)</p>
<pre><code>s = &quot;This be a string&quot;
if s.find(&quot;is&quot;) == -1:
    print &quot;No 'is' here!&quot;
else:
    print &quot;Found 'is' in the string.&quot;
</code></pre>
<h3 id="如何判断一个字符串是数字">如何判断一个字符串是数字<a href="#如何判断一个字符串是数字" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/354038/how-do-i-check-if-a-string-is-a-number-in-python">链接</a></p>
<p>使用这种方法会不会十分丑陋和低效</p>
<pre><code>def is_number(s):
    try:
        float(s)
        return True
    except ValueError:
        return False
</code></pre>
<p>使用这种方法并不丑陋和低效</p>
<p>使用isdigit(缺点，对非整数无能为力)</p>
<pre><code>a = &quot;03523&quot;
a.isdigit()
</code></pre>
<h3 id="如何填充0到数字字符串中保证统一长度">如何填充0到数字字符串中保证统一长度<a href="#如何填充0到数字字符串中保证统一长度" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/339007/python-nicest-way-to-pad-zeroes-to-string">链接</a></p>
<p>对于字符串</p>
<pre><code>&gt;&gt;&gt; n = '4'
&gt;&gt;&gt; print n.zfill(3)
&gt;&gt;&gt; '004'
</code></pre>
<p>对于数字,<a href="http://docs.python.org/2/library/string.html#formatexamples">相关文档</a></p>
<pre><code>&gt;&gt;&gt; n = 4
&gt;&gt;&gt; print '%03d' % n
&gt;&gt;&gt; 004
&gt;&gt;&gt; print &quot;{0:03d}&quot;.format(4)  # python &gt;= 2.6
&gt;&gt;&gt; 004
&gt;&gt;&gt; print(&quot;{0:03d}&quot;.format(4))  # python 3
&gt;&gt;&gt; 004
</code></pre>
<h2 id="控制结构条件循环">控制结构（条件、循环）<a href="#控制结构条件循环" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="如何在循环中获取下标">如何在循环中获取下标<a href="#如何在循环中获取下标" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/522563/accessing-the-index-in-python-for-loops">链接</a></p>
<p>使用enumerate</p>
<pre><code>for idx, val in enumerate(ints):
    print idx, val
</code></pre>
<h3 id="如何判断一个变量的类型">如何判断一个变量的类型<a href="#如何判断一个变量的类型" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/402504/how-to-determine-the-variable-type-in-python">链接</a></p>
<p>使用type</p>
<pre><code>&gt;&gt;&gt; i = 123
&gt;&gt;&gt; type(i)
&lt;type 'int'&gt;
&gt;&gt;&gt; type(i) is int
True
&gt;&gt;&gt; i = 123456789L
&gt;&gt;&gt; type(i)
&lt;type 'long'&gt;
&gt;&gt;&gt; type(i) is long
True
&gt;&gt;&gt; i = 123.456
&gt;&gt;&gt; type(i)
&lt;type 'float'&gt;
&gt;&gt;&gt; type(i) is float
True
</code></pre>
<p>另外一个相同的问题  <a href="http://stackoverflow.com/questions/2225038/python-determine-the-type-of-an-object">链接</a></p>
<pre><code>&gt;&gt;&gt; type( [] ) == list
True
&gt;&gt;&gt; type( {} ) == dict
True
&gt;&gt;&gt; type( &quot;&quot; ) == str
True
&gt;&gt;&gt; type( 0 ) == int
True

&gt;&gt;&gt; class Test1 ( object ):
    pass
&gt;&gt;&gt; class Test2 ( Test1 ):
    pass
&gt;&gt;&gt; a = Test1()
&gt;&gt;&gt; b = Test2()
&gt;&gt;&gt; type( a ) == Test1
True
&gt;&gt;&gt; type( b ) == Test2
True
&gt;&gt;&gt; type( b ) == Test1
False
&gt;&gt;&gt; isinstance( b, Test1 )
True
&gt;&gt;&gt; isinstance( b, Test2 )
True
&gt;&gt;&gt; isinstance( a, Test1 )
True
&gt;&gt;&gt; isinstance( a, Test2 )
False
&gt;&gt;&gt; isinstance( [], list )
True
&gt;&gt;&gt; isinstance( {}, dict )
True
</code></pre>
<h2 id="类">类<a href="#类" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="如何判断一个对象是否拥有某个属性">如何判断一个对象是否拥有某个属性<a href="#如何判断一个对象是否拥有某个属性" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/610883/how-to-know-if-an-object-has-an-attribute-in-python">链接</a></p>
<pre><code>if hasattr(a, 'property'):
    a.property
</code></pre>
<p>两种风格</p>
<p>EAFP(easier to ask for forgiveness than permission)</p>
<p>LBYL(look before you leap)</p>
<p>相关内容
<a href="http://web.archive.org/web/20070929122422/http://mail.python.org/pipermail/python-list/2003-May/205182.html">EAFP vs LBYL (was Re: A little disappointed so far)</a>
<a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#eafp-vs-lbyl">EAFP vs. LBYL @Code Like a Pythonista: Idiomatic Python</a></p>
<pre><code>try:
    doStuff(a.property)
except AttributeError:
    otherStuff()
or

if hasattr(a, 'property'):
    doStuff(a.property)
else:
    otherStuff()
</code></pre>
<h3 id="python中的类变量环境变量">Python中的类变量(环境变量)<a href="#python中的类变量环境变量" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/68645/static-class-variables-in-python">链接</a></p>
<p>在类中定义的变量，不在方法定义中，成为类变量或静态变量</p>
<pre><code>&gt;&gt;&gt; class MyClass:
...     i = 3
...
&gt;&gt;&gt; MyClass.i
3
</code></pre>
<p>i是类级别的变量，但这里要和实例级别的变量i区分开</p>
<pre><code>&gt;&gt;&gt; m = MyClass()
&gt;&gt;&gt; m.i = 4
&gt;&gt;&gt; MyClass.i, m.i
&gt;&gt;&gt; (3, 4)
</code></pre>
<p>这和C++/java完全不同，但和C#区别不大，C#不允许类实例获取静态变量</p>
<p>具体见 <a href="http://docs.python.org/2/tutorial/classes.html#SECTION0011320000000000000000">what the Python tutorial has to say on the subject of classes and class objects</a></p>
<p>另外，静态方法</p>
<pre><code>class C:
    @staticmethod
    def f(arg1, arg2, ...): ...
</code></pre>
<h3 id="如何定义静态方法static-method">如何定义静态方法(static method)<a href="#如何定义静态方法static-method" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/735975/static-methods-in-python">链接</a></p>
<p>使用 <a href="http://docs.python.org/2/library/functions.html#staticmethod">staticmethod</a>装饰器</p>
<pre><code>class MyClass(object):
    @staticmethod
    def the_static_method(x):
        print x
MyClass.the_static_method(2) # outputs 2
</code></pre>
<h3 id="staticmethod和classmethod的区别">@staticmethod和@classmethod的区别<a href="#staticmethod和classmethod的区别" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python">链接</a></p>
<p>staticmethod，静态方法在调用时，对类及实例一无所知</p>
<p>仅仅是获取传递过来的参数，没有隐含的第一个参数，在Python里基本上用处不大，你完全可以用一个模块函数替换它</p>
<p>classmethod, 在调用时，将会获取到其所在的类，或者类实例，作为其第一个参数</p>
<p>当你想将函数作为一个类工厂时，这非常有用: 第一个参数是类，你可以实例化出对应实例对象，甚至子类对象。</p>
<p>可以观察下 dict.fromkey(),是一个类方法，当子类调用时，返回子类的实例</p>
<pre><code>&gt;&gt;&gt; class DictSubclass(dict):
...     def __repr__(self):
...         return &quot;DictSubclass&quot;
...
&gt;&gt;&gt; dict.fromkeys(&quot;abc&quot;)
{'a': None, 'c': None, 'b': None}
&gt;&gt;&gt; DictSubclass.fromkeys(&quot;abc&quot;)
DictSubclass
&gt;&gt;&gt;
</code></pre>
<h3 id="如何获取一个实例的类名">如何获取一个实例的类名<a href="#如何获取一个实例的类名" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/510972/getting-the-class-name-of-an-instance-in-python">链接</a></p>
<pre><code>x.__class__.__name__
</code></pre>
<h2 id="模块">模块<a href="#模块" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="如何列出一个目录的所有文件">如何列出一个目录的所有文件<a href="#如何列出一个目录的所有文件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/3207219/how-to-list-all-files-of-a-directory-in-python">链接</a></p>
<p>1.使用os.listdir(),得到目录下的所有文件和文件夹</p>
<pre><code>#只需要文件
from os import listdir
from os.path import isfile, join
onlyfiles = [ f for f in listdir(mypath) if isfile(join(mypath,f)) ]
</code></pre>
<p>2.os.walk()</p>
<pre><code>from os import walk

f = []
for (dirpath, dirnames, filenames) in walk(mypath):
    f.extend(filenames)
    break
</code></pre>
<p>3.glob</p>
<pre><code>import glob
print glob.glob(&quot;/home/adam/*.txt&quot;)
</code></pre>
<p>重复问题 <a href="http://stackoverflow.com/questions/120656/directory-listing-in-python">链接</a></p>
<p>import os</p>
<pre><code>for dirname, dirnames, filenames in os.walk('.'):
    # print path to all subdirectories first.
    for subdirname in dirnames:
        print os.path.join(dirname, subdirname)

    # print path to all filenames.
    for filename in filenames:
        print os.path.join(dirname, filename)
</code></pre>
<h3 id="json和simplejson的区别">json和simplejson的区别<a href="#json和simplejson的区别" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/712791/json-and-simplejson-module-differences-in-python">链接</a></p>
<p>json就是simple，加入到标准库. json在2.6加入，simplejson在2.4+,2.6+,更有优势</p>
<p>另外，simplejson更新频率更高，如果你想使用最新版本，建议用simplejson</p>
<p>好的做法是</p>
<pre><code>try: import simplejson as json
except ImportError: import json
</code></pre>
<p>另外,可以关注二者性能上的比较</p>
<h3 id="python中如何获取当前时间">python中如何获取当前时间<a href="#python中如何获取当前时间" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/415511/how-to-get-current-time-in-python">链接</a></p>
<p>时间日期</p>
<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; datetime.datetime.now()
datetime(2009, 1, 6, 15, 8, 24, 78915)
</code></pre>
<p>如果仅获取时间</p>
<pre><code>&gt;&gt;&gt; datetime.datetime.time(datetime.datetime.now())
datetime.time(15, 8, 24, 78915))
#等价
&gt;&gt;&gt; datetime.datetime.now().time()
</code></pre>
<p>可以从文档中获取更多 <a href="http://docs.python.org/2/library/datetime.html">文档</a></p>
<p>如果想避免额外的datetime.</p>
<pre><code>&gt;&gt;&gt; from datetime import datetime
</code></pre>
<h2 id="其他">其他<a href="#其他" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="如何从标准输入读取内容stdin">如何从标准输入读取内容stdin<a href="#如何从标准输入读取内容stdin" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1450393/how-do-you-read-from-stdin-in-python">链接</a></p>
<p>使用<a href="http://docs.python.org/2/library/fileinput.html">fileinput</a></p>
<pre><code>import fileinput
for line in fileinput.input():
    pass
</code></pre>
<h3 id="foo-is-none-和-foo--none的区别">foo is None 和 foo == None的区别<a href="#foo-is-none-和-foo--none的区别" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/26595/is-there-any-difference-between-foo-is-none-and-foo-none">链接</a></p>
<pre><code>if foo is None: pass
if foo == None: pass
</code></pre>
<p>如果比较相同的对象实例，is总是返回True
而 == 最终取决于 &ldquo;<strong>eq</strong>()&rdquo;</p>
<pre><code>&gt;&gt;&gt; class foo(object):
    def __eq__(self, other):
        return True

&gt;&gt;&gt; f = foo()
&gt;&gt;&gt; f == None
True
&gt;&gt;&gt; f is None
False

&gt;&gt;&gt; list1 = [1, 2, 3]
&gt;&gt;&gt; list2 = [1, 2, 3]]
&gt;&gt;&gt; list1==list2
True
&gt;&gt;&gt; list1 is list2
False
</code></pre>
<p>另外</p>
<pre><code>(ob1 is ob2) 等价于 (id(ob1) == id(ob2))
</code></pre>
<h3 id="__init__py是做什么用的">__init__.py是做什么用的<a href="#__init__py是做什么用的" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/448271/what-is-init-py-for">链接</a></p>
<p>这是包的一部分，<a href="http://docs.python.org/2/tutorial/modules.html#packages">具体文档</a></p>
<p>__init__.py让Python把目录当成包，</p>
<p>最简单的例子，__init__.py仅是一个空文件，但它可以一样执行包初始化代码或者设置__all__变量，后续说明</p>
<h3 id="如何获取安装的python模块列表">如何获取安装的python模块列表<a href="#如何获取安装的python模块列表" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/739993/get-a-list-of-installed-python-modules">链接</a></p>
<pre><code>&gt;&gt;&gt; help('modules')
</code></pre>
<h2 id="环境相关">环境相关<a href="#环境相关" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="setuppy安装后如何卸载">setup.py安装后如何卸载<a href="#setuppy安装后如何卸载" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1550226/python-setup-py-uninstall">链接</a></p>
<p>使用下面命令安装的包如何卸载</p>
<pre><code>python setup.py install
</code></pre>
<p>手工删除的话</p>
<pre><code>python setup.py install --record files.txt
cat files.txt | xargs rm -rf
</code></pre>
<h2 id="异常">异常<a href="#异常" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="如何一行内处理多个异常">如何一行内处理多个异常<a href="#如何一行内处理多个异常" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/6470428/catch-multiple-exceptions-in-one-line-except-block">链接</a></p>
<p>我知道可以这么做</p>
<pre><code>try:
    # do something that may fail
except:
    # do this if ANYTHING goes wrong
</code></pre>
<p>也可以</p>
<pre><code>try:
    # do something that may fail
except IDontLikeYourFaceException:
    # put on makeup or smile
except YouAreTooShortException:
    # stand on a ladder
</code></pre>
<p>如果想在一行里处理多个异常的话</p>
<pre><code>try:
    # do something that may fail
except IDontLIkeYouException, YouAreBeingMeanException: #没生效
except Exception, e: #捕获了所有
    # say please
</code></pre>
<p>答案</p>
<pre><code># as在python2.6,python2.7中仍然可以使用
except (IDontLIkeYouException, YouAreBeingMeanException) as e:
    pass
</code></pre>
<h3 id="如何flush-python的print输出">如何flush Python的print输出<a href="#如何flush-python的print输出" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/230751/how-to-flush-output-of-python-print">链接</a>
重复问题 <a href="http://stackoverflow.com/questions/107705/python-output-buffering">链接</a></p>
<p>默认print输出到sys.stdout</p>
<pre><code>import sys
sys.stdout.flush()
</code></pre>
<p>参考
<a href="http://docs.python.org/2/reference/simple_stmts.html#the-print-statement">http://docs.python.org/reference/simple_stmts.html#the-print-statement</a>
<a href="http://docs.python.org/2/library/sys.html">http://docs.python.org/library/sys.html</a>
<a href="http://docs.python.org/2/library/stdtypes.html#file-objects">http://docs.python.org/library/stdtypes.html#file-objects</a></p>
<h3 id="如何获取一个函数的函数名字符串">如何获取一个函数的函数名字符串<a href="#如何获取一个函数的函数名字符串" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/251464/how-to-get-the-function-name-as-string-in-python">链接</a></p>
<pre><code>my_function.__name__
&gt;&gt;&gt; import time
&gt;&gt;&gt; time.time.__name__
'time'
</code></pre>
<h3 id="应该在学习python3之前学习python2还是直接学习python3">应该在学习Python3之前学习Python2，还是直接学习Python3<a href="#应该在学习python3之前学习python2还是直接学习python3" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/170921/should-i-learn-python-2-before-3-or-start-directly-from-python-3">链接</a></p>
<p>你可以从python2开始，2和3主要的语法格式和风格相同</p>
<p>3要替代2不是短时间内能完成的，将会是一个很长的过程，所以学习Python2并没有什么坏处</p>
<p>我建议你关注下2和3的不同之处  <a href="http://stackoverflow.com/questions/170921/should-i-learn-python-2-before-3-or-start-directly-from-python-3">This slides gives you a quick introduction of the changes in Python 2 and 3</a></p>
<h3 id="python中用比较字符串is有时候会返回错误判断">python中用==比较字符串，is有时候会返回错误判断<a href="#python中用比较字符串is有时候会返回错误判断" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1504717/python-vs-is-comparing-strings-is-fails-sometimes-why">链接</a></p>
<p>is是身份测试，==是相等测试</p>
<pre><code>&gt;&gt;&gt; a = 'pub'
&gt;&gt;&gt; b = ''.join(['p', 'u', 'b'])
&gt;&gt;&gt; a == b
True
&gt;&gt;&gt; a is b
False'
</code></pre>
<p>is 等价于 id(a) == id(b)</p>
<h3 id="如何截取一个字符串获得子串">如何截取一个字符串获得子串<a href="#如何截取一个字符串获得子串" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/663171/is-there-a-way-to-substring-a-string-in-python">链接</a></p>
<pre><code>&gt;&gt;&gt; x = &quot;Hello World!&quot;
&gt;&gt;&gt; x[2:]
'llo World!'
&gt;&gt;&gt; x[:2]
'He'
&gt;&gt;&gt; x[:-2]
'Hello Worl'
&gt;&gt;&gt; x[-2:]
'd!'
&gt;&gt;&gt; x[2:-2]
'llo Worl'
</code></pre>
<p>python将这类操作称为切片，可以作用于序列类型，不仅仅是字符串</p>
<h3 id="用函数名字符串调用一个函数">用函数名字符串调用一个函数<a href="#用函数名字符串调用一个函数" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/3061/calling-a-function-from-a-string-with-the-functions-name-in-python">链接</a></p>
<p>假设模块foo有函数bar:</p>
<pre><code>import foo
methodToCall = getattr(foo, 'bar')
result = methodToCall()
</code></pre>
<p>或者一行搞定</p>
<pre><code>result = getattr(foo, 'bar')()
</code></pre>
<h3 id="如何获取文件扩展名">如何获取文件扩展名<a href="#如何获取文件扩展名" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/541390/extracting-extension-from-filename-in-python">链接</a></p>
<p>使用os.path.splitext方法：</p>
<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; fileName, fileExtension = os.path.splitext('/path/to/somefile.ext')
&gt;&gt;&gt; fileName
'/path/to/somefile'
&gt;&gt;&gt; fileExtension
'.ext'
</code></pre>
<h3 id="如何获取list中包含某个元素所在的下标">如何获取list中包含某个元素所在的下标<a href="#如何获取list中包含某个元素所在的下标" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/176918/in-python-how-do-i-find-the-index-of-an-item-given-a-list-containing-it">链接</a></p>
<pre><code>&gt;&gt;&gt; [&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;].index('bar')
1
</code></pre>
<p>参照 <a href="http://docs.python.org/2/tutorial/datastructures.html#more-on-lists">文档</a></p>
<h3 id="如何截掉空格包括tab">如何截掉空格（包括tab)<a href="#如何截掉空格包括tab" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1185524/how-to-trim-whitespace-including-tabs">链接</a></p>
<p>空白在字符串左右两边</p>
<pre><code>s = &quot;  \t a string example\t  &quot;
s = s.strip()
</code></pre>
<p>空白在字符串右边</p>
<pre><code>s = s.rstrip()
</code></pre>
<p>左边</p>
<pre><code>s = s.lstrip()
</code></pre>
<p>另外你可以指定要截掉的字符作为参数</p>
<pre><code>s = s.strip(' \t\n\r')
</code></pre>
<h3 id="如何将一个十六进制字符串转为整数">如何将一个十六进制字符串转为整数<a href="#如何将一个十六进制字符串转为整数" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/209513/convert-hex-string-to-int-in-python">链接</a></p>
<pre><code>&gt;&gt;&gt; int(&quot;a&quot;, 16)
10
&gt;&gt;&gt; int(&quot;0xa&quot;,16)
10
</code></pre>
<h3 id="如何结束退出一个python脚本">如何结束退出一个python脚本<a href="#如何结束退出一个python脚本" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/73663/terminating-a-python-script">链接</a></p>
<pre><code>import sys
sys.exit()
</code></pre>
<p>详细 <a href="http://docs.python.org/2/library/sys.html">文档</a></p>
<h3 id="如何往文件中追加文本">如何往文件中追加文本<a href="#如何往文件中追加文本" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/4706499/how-do-you-append-to-file-in-python">链接</a></p>
<pre><code>with open(&quot;test.txt&quot;, &quot;a&quot;) as myfile:
    myfile.write(&quot;appended text&quot;)
</code></pre>
<p>可以使用&rsquo;a&rsquo;或&rsquo;a+b&rsquo; mode打开文件，见 <a href="http://docs.python.org/2/library/functions.html#open">文档</a></p>
<h3 id="如何使用不同分隔符切分字符串">如何使用不同分隔符切分字符串<a href="#如何使用不同分隔符切分字符串" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1059559/python-strings-split-with-multiple-separators">链接</a></p>
<p>使用re.split  <a href="http://docs.python.org/2/library/re.html#re.split">文档</a></p>
<pre><code>&gt;&gt;&gt; re.split('\W+', 'Words, words, words.')
['Words', 'words', 'words', '']
&gt;&gt;&gt; re.split('(\W+)', 'Words, words, words.')
['Words', ', ', 'words', ', ', 'words', '.', '']
&gt;&gt;&gt; re.split('\W+', 'Words, words, words.', 1)
['Words', 'words, words.'])
</code></pre>
<p>或者匹配获取正确的 re.findall</p>
<pre><code>import re
DATA = &quot;Hey, you - what are you doing here!?&quot;
print re.findall(r&quot;[\w']+&quot;, DATA)
# Prints ['Hey', 'you', 'what', 'are', 'you', 'doing', 'here']
</code></pre>
<h3 id="如何获取一个字符的ascii码">如何获取一个字符的ASCII码<a href="#如何获取一个字符的ascii码" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/227459/ascii-value-of-a-character-in-python">链接</a></p>
<pre><code>&gt;&gt;&gt; ord('a')
97
&gt;&gt;&gt; chr(97)
'a'
&gt;&gt;&gt; chr(ord('a') + 3)
'd'
&gt;&gt;&gt;
</code></pre>
<p>另外对于unicode</p>
<pre><code>&gt;&gt;&gt; unichr(97)
u'a'
&gt;&gt;&gt; unichr(1234)
u'\u04d2'
</code></pre>
<h3 id="排序一个列表中的所有dict根据dict内值">排序一个列表中的所有dict，根据dict内值<a href="#排序一个列表中的所有dict根据dict内值" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/72899/in-python-how-do-i-sort-a-list-of-dictionaries-by-values-of-the-dictionary">链接</a></p>
<p>如何排序如下列表，根据name或age</p>
<pre><code>[{'name':'Homer', 'age':39}, {'name':'Bart', 'age':10}]
</code></pre>
<p>简单的做法；</p>
<pre><code>newlist = sorted(list_to_be_sorted, key=lambda k: k['name'])
</code></pre>
<p>高效的做法</p>
<pre><code>from operator import itemgetter
newlist = sorted(list_to_be_sorted, key=itemgetter('name'))
</code></pre>
<h3 id="读文件到列表中">读文件到列表中<a href="#读文件到列表中" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/3277503/python-read-file-line-by-line-into-array">链接</a></p>
<pre><code>f = open('filename')
lines = f.readlines()
f.close()
等价
with open(fname) as f:
    content = f.readlines()
</code></pre>
<p><a href="http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files">文档</a></p>
<h3 id="如何用http下载一个文件">如何用http下载一个文件<a href="#如何用http下载一个文件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python">链接</a></p>
<p>直接使用urllib</p>
<pre><code>import urllib
urllib.urlretrieve (&quot;http://www.example.com/songs/mp3.mp3&quot;, &quot;mp3.mp3&quot;)
</code></pre>
<p>使用urllib2,并提供一个进度条</p>
<pre><code>import urllib2

url = &quot;http://download.thinkbroadband.com/10MB.zip&quot;

file_name = url.split('/')[-1]
u = urllib2.urlopen(url)
f = open(file_name, 'wb')
meta = u.info()
file_size = int(meta.getheaders(&quot;Content-Length&quot;)[0])
print &quot;Downloading: %s Bytes: %s&quot; % (file_name, file_size)

file_size_dl = 0
block_sz = 8192
while True:
    buffer = u.read(block_sz)
    if not buffer:
        break

    file_size_dl += len(buffer)
    f.write(buffer)
    status = r&quot;%10d  [%3.2f%%]&quot; % (file_size_dl, file_size_dl * 100. / file_size)
    status = status + chr(8)*(len(status)+1)
    print status,

f.close()
</code></pre>
<p>使用第三方<a href="http://docs.python-requests.org/en/latest/index.html">requests</a>包</p>
<pre><code>&gt;&gt;&gt; import requests
&gt;&gt;&gt;
&gt;&gt;&gt; url = &quot;http://download.thinkbroadband.com/10MB.zip&quot;
&gt;&gt;&gt; r = requests.get(url)
&gt;&gt;&gt; print len(r.content)
10485760
</code></pre>
<h3 id="在virtualenv中如何使用不同的python版本">在virtualenv中如何使用不同的python版本<a href="#在virtualenv中如何使用不同的python版本" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1534210/use-different-python-version-with-virtualenv">链接</a></p>
<p>在创建virtualenv实例时，使用-p选项</p>
<pre><code>virtualenv -p /usr/bin/python2.6 &lt;path/to/new/virtualenv/&gt;
</code></pre>
<h3 id="python中如何将一行长代码切成多行">python中如何将一行长代码切成多行<a href="#python中如何将一行长代码切成多行" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/53162/how-can-i-do-a-line-break-line-continuation-in-python">链接</a></p>
<p>例如：</p>
<pre><code>e = 'a' + 'b' + 'c' + 'd'
变成
e = 'a' + 'b' +
    'c' + 'd'
</code></pre>
<p>括号中，可以直接换行</p>
<pre><code>a = dostuff(blahblah1, blahblah2, blahblah3, blahblah4, blahblah5,
            blahblah6, blahblah7)
</code></pre>
<p>非括号你可以这么做</p>
<pre><code>a = '1' + '2' + '3' + \
    '4' + '5'
或者
a = ('1' + '2' + '3' +
    '4' + '5')
</code></pre>
<p>可以查看下代码风格： <a href="http://www.python.org/dev/peps/pep-0008/">style guide</a>
推荐是后一种，但某些个别情况下，加入括号会导致错误</p>
<h3 id="如何找到一个目录下所有txt文件">如何找到一个目录下所有.txt文件<a href="#如何找到一个目录下所有txt文件" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/3964681/find-all-files-in-directory-with-extension-txt-with-python">链接</a></p>
<p>使用<a href="http://docs.python.org/2/library/glob.html">glob</a></p>
<pre><code>import glob
import os
os.chdir(&quot;/mydir&quot;)
for files in glob.glob(&quot;*.txt&quot;):
    print files
</code></pre>
<p>使用os.listdir</p>
<pre><code>import os
os.chdir(&quot;/mydir&quot;)
for files in os.listdir(&quot;.&quot;):
    if files.endswith(&quot;.txt&quot;):
        print files
</code></pre>
<p>或者遍历目录</p>
<pre><code>import os
for r,d,f in os.walk(&quot;/mydir&quot;):
    for files in f:
        if files.endswith(&quot;.txt&quot;):
            print os.path.join(r,files)
</code></pre>
<h3 id="如何使用绝对路径import一个模块">如何使用绝对路径import一个模块<a href="#如何使用绝对路径import一个模块" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/67631/how-to-import-a-module-given-the-full-path">链接</a></p>
<pre><code>import imp

foo = imp.load_source('module.name', '/path/to/file.py')
foo.MyClass()
</code></pre>
<h3 id="如何在遍历一个list时删除某些玄素">如何在遍历一个list时删除某些玄素<a href="#如何在遍历一个list时删除某些玄素" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python">链接</a></p>
<p>使用列表解析</p>
<pre><code>somelist = [x for x in somelist if determine(x)]
</code></pre>
<p>上面那个操作将产生一个全新的somelist对象，而失去了对原有somelist对象的引用</p>
<pre><code>#在原有对象上进行修改
somelist[:] = [x for x in somelist if determine(x)]
</code></pre>
<p>使用itertools</p>
<pre><code>from itertools import ifilterfalse
somelist[:] = list(ifilterfalse(determine, somelist))
</code></pre>
<h3 id="如何强制使用浮点数除法">如何强制使用浮点数除法<a href="#如何强制使用浮点数除法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1267869/how-can-i-force-division-to-be-floating-point-in-python">链接</a></p>
<p>如何强制使除法结果c是浮点数</p>
<pre><code>c = a / b
</code></pre>
<p>可以使用__future__</p>
<pre><code>&gt;&gt;&gt; from __future__ import division
&gt;&gt;&gt; a = 4
&gt;&gt;&gt; b = 6
&gt;&gt;&gt; c = a / b
&gt;&gt;&gt; c
0.66666666666666663
</code></pre>
<p>或者转换,如果除数或被除数是浮点数，那么结果也是浮点数</p>
<pre><code>c = a / float(b)
</code></pre>
<h3 id="如何映射两个列表成为一个字典">如何映射两个列表成为一个字典<a href="#如何映射两个列表成为一个字典" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/209840/map-two-lists-into-a-dictionary-in-python">链接</a></p>
<p>两个列表</p>
<pre><code>keys = ('name', 'age', 'food')
values = ('Monty', 42, 'spam')
</code></pre>
<p>如何得到</p>
<pre><code>dict = {'name' : 'Monty', 'age' : 42, 'food' : 'spam'}
</code></pre>
<p>使用zip</p>
<pre><code>&gt;&gt;&gt; keys = ['a', 'b', 'c']
&gt;&gt;&gt; values = [1, 2, 3]
&gt;&gt;&gt; dictionary = dict(zip(keys, values))
&gt;&gt;&gt; print dictionary
{'a': 1, 'b': 2, 'c': 3}
</code></pre>
<h3 id="找到当前目录及文件所在目录">找到当前目录及文件所在目录<a href="#找到当前目录及文件所在目录" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/5137497/find-current-directory-and-files-directory">链接</a></p>
<p>查找当前目录使用os.getcwd()</p>
<p>查找某个文件的目录，使用, <a href="http://docs.python.org/2/library/os.path.html">os.path</a></p>
<pre><code>import os.path
os.path.realpath(__file__)
</code></pre>
<h3 id="为何1-in-10--true执行结果是false">为何1 in [1,0] == True执行结果是False<a href="#为何1-in-10--true执行结果是false" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/9284350/why-does-1-in-1-0-true-evaluate-to-false">链接</a></p>
<p>有如下</p>
<pre><code>&gt;&gt;&gt; 1 in [1,0]             # This is expected
True
&gt;&gt;&gt; 1 in [1,0] == True     # This is strange
False
&gt;&gt;&gt; (1 in [1,0]) == True   # This is what I wanted it to be
True
&gt;&gt;&gt; 1 in ([1,0] == True)   # But it's not just a precedence issue!
                           # It did not raise an exception on the second example.

Traceback (most recent call last):
  File &quot;&lt;pyshell#4&gt;&quot;, line 1, in &lt;module&gt;
      1 in ([1,0] == True)
      TypeError: argument of type 'bool' is not iterable
</code></pre>
<p>这里python使用了比较运算符链</p>
<pre><code>1 in [1,0] == True
</code></pre>
<p>将被转为</p>
<pre><code>(1 in [1, 0]) and ([1, 0] == True)
</code></pre>
<p>很显然是false的</p>
<p>同样的</p>
<pre><code>a &lt; b &lt; c
</code></pre>
<p>会被转为</p>
<pre><code>(a &lt; b) and (b &lt; c) # b不会被解析两次
</code></pre>
<p><a href="http://docs.python.org/2/reference/expressions.html#not-in">具体文档</a></p>
<h3 id="python中的switch替代语法">Python中的switch替代语法<a href="#python中的switch替代语法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/60208/replacements-for-switch-statement-in-python">链接</a></p>
<p>python中没有switch，有什么推荐的处理方法么</p>
<p>使用字典:</p>
<pre><code>def f(x):
    return {
        'a': 1,
        'b': 2,
    }.get(x, 9)
</code></pre>
<p>Python Cookbook中的几种方式</p>
<p><a href="http://code.activestate.com/recipes/410692/">Readable switch construction without lambdas or dictionaries</a></p>
<p><a href="http://code.activestate.com/recipes/410695/">Exception-based Switch-Case</a></p>
<p><a href="http://code.activestate.com/recipes/181064/">Using a Dictionary in place of a &lsquo;switch&rsquo; statement</a></p>
<h3 id="如何将字符串转换为datetime">如何将字符串转换为datetime<a href="#如何将字符串转换为datetime" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/466345/converting-string-into-datetime">链接</a></p>
<p>可以查看下time模块的<a href="http://docs.python.org/2/library/time.html#time.strptime">strptime</a>方法，反向操作是<a href="http://docs.python.org/2/library/time.html#time.strftime">strftime</a></p>
<pre><code>from datetime import datetime
date_object = datetime.strptime('Jun 1 2005  1:33PM', '%b %d %Y %I:%M%p')
</code></pre>
<p><a href="http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior">扩展文档</a></p>
<h3 id="python中有没有简单优雅的方式定义单例类">Python中有没有简单优雅的方式定义单例类<a href="#python中有没有简单优雅的方式定义单例类" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/31875/is-there-a-simple-elegant-way-to-define-singletons-in-python">链接</a></p>
<p>我不认为有必要，一个拥有函数的模块（不是类）可以作为很好的单例使用，它的所有变量被绑定到这个模块，无论如何都不能被重复实例化</p>
<p>如果你确实想用一个类来实现，在python中不能创建私有类或私有构造函数,所以你不能隔离多个实例而仅仅通过自己的API来访问属性</p>
<p>我还是认为将函数放入模块，并将其作为一个单例来使用是最好的办法</p>
<h3 id="将一个字符串转为一个字典">将一个字符串转为一个字典<a href="#将一个字符串转为一个字典" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/988228/converting-a-string-to-dictionary">链接</a></p>
<p>如何将字符串转成字典，不适用eval</p>
<pre><code>s = &quot;{'muffin' : 'lolz', 'foo' : 'kitty'}&quot;
</code></pre>
<p>从python2.6开始，你可以使用内建模块 ast.literal_eval</p>
<pre><code>&gt;&gt;&gt; import ast
&gt;&gt;&gt; ast.literal_eval(&quot;{'muffin' : 'lolz', 'foo' : 'kitty'}&quot;)
{'muffin': 'lolz', 'foo': 'kitty'}
</code></pre>
<p>这个做法比直接eval更安全
帮助文档</p>
<pre><code>&gt;&gt;&gt; help(ast.literal_eval)
Help on function literal_eval in module ast:

literal_eval(node_or_string)
    Safely evaluate an expression node or a string containing a Python
    expression.  The string or node provided may only consist of the following
    Python literal structures: strings, numbers, tuples, lists, dicts, booleans,
    and None.
</code></pre>
<p>举例</p>
<pre><code>&gt;&gt;&gt; eval(&quot;shutil.rmtree('mongo')&quot;)
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
File &quot;/opt/Python-2.6.1/lib/python2.6/shutil.py&quot;, line 208, in rmtree
    onerror(os.listdir, path, sys.exc_info())
File &quot;/opt/Python-2.6.1/lib/python2.6/shutil.py&quot;, line 206, in rmtree
    names = os.listdir(path)
OSError: [Errno 2] No such file or directory: 'mongo'
&gt;&gt;&gt; ast.literal_eval(&quot;shutil.rmtree('mongo')&quot;)
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;/opt/Python-2.6.1/lib/python2.6/ast.py&quot;, line 68, in literal_eval
    return _convert(node_or_string)
File &quot;/opt/Python-2.6.1/lib/python2.6/ast.py&quot;, line 67, in _convert
    raise ValueError('malformed string')
ValueError: malformed string
</code></pre>
<h3 id="python如何检查一个对象是list或者tuple但是不是一个字符串">Python如何检查一个对象是list或者tuple，但是不是一个字符串<a href="#python如何检查一个对象是list或者tuple但是不是一个字符串" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1835018/python-check-if-an-object-is-a-list-or-tuple-but-not-string">链接</a></p>
<p>原来的做法是</p>
<pre><code>assert isinstance(lst, (list, tuple))
</code></pre>
<p>有没有更好的做法</p>
<p>我认为下面的方式是你需要的</p>
<pre><code>assert not isinstance(lst, basestring)
</code></pre>
<p>原来的方式，你可能会漏过很多像列表，但并非list/tuple的</p>
<h3 id="使用-if-x-is-not-none-还是if-not-x-is-none">使用 &lsquo;if x is not None&rsquo; 还是&rsquo;if not x is None&rsquo;<a href="#使用-if-x-is-not-none-还是if-not-x-is-none" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/2710940/python-if-x-is-not-none-or-if-not-x-is-none">链接</a></p>
<p>我总想着使用 &lsquo;if x is not None&rsquo; 会更加简明</p>
<p>但是google的Python风格指南使用的却是 &lsquo;if x is not None&rsquo;</p>
<p>性能上没有什么区别，他们编译成相同的字节码</p>
<pre><code>Python 2.6.2 (r262:71600, Apr 15 2009, 07:20:39)
&gt;&gt;&gt; import dis
&gt;&gt;&gt; def f(x):
...    return x is not None
...
&gt;&gt;&gt; dis.dis(f)
2           0 LOAD_FAST                0 (x)
            3 LOAD_CONST               0 (None)
            6 COMPARE_OP               9 (is not)
            9 RETURN_VALUE
&gt;&gt;&gt; def g(x):
...   return not x is None
...
&gt;&gt;&gt; dis.dis(g)
2           0 LOAD_FAST                0 (x)
            3 LOAD_CONST               0 (None)
            6 COMPARE_OP               9 (is not)
            9 RETURN_VALUE
</code></pre>
<p>在风格上，我尽量避免 &rsquo;not x is y&rsquo; 这种形式，虽然编译器会认为和 &rsquo;not (x is y)&lsquo;一样，但是读代码的人或许会误解为 &lsquo;(not x) is y&rsquo;</p>
<p>如果写作 &lsquo;x is not y&rsquo; 就不会有歧义</p>
<p>最佳实践</p>
<pre><code>if x is not None:
    # Do something about x
</code></pre>
<h3 id="如何获取一个文件的创建和修改时间">如何获取一个文件的创建和修改时间<a href="#如何获取一个文件的创建和修改时间" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/237079/how-to-get-file-creation-modification-date-times-in-python">链接</a></p>
<p>跨平台的获取文件创建及修改时间的方法</p>
<p>你有很多选择</p>
<p>使用<a href="http://docs.python.org/release/2.5.2/lib/module-os.path.html#l2h-2177">os.path.getmtime</a>或者<a href="http://docs.python.org/release/2.5.2/lib/module-os.path.html#l2h-2178">os.path.getctime</a></p>
<pre><code>import os.path, time
print &quot;last modified: %s&quot; % time.ctime(os.path.getmtime(file))
print &quot;created: %s&quot; % time.ctime(os.path.getctime(file))
</code></pre>
<p>或者<a href="http://www.python.org/doc/2.5.2/lib/module-stat.html">os.stat</a></p>
<pre><code>import os, time
(mode, ino, dev, nlink, uid, gid, size, atime, mtime, ctime) = os.stat(file)
print &quot;last modified: %s&quot; % time.ctime(mtime)
</code></pre>
<p>注意，ctime()并非指*nix系统中文件创建时间，而是这个节点数据的最后修改时间</p>
<h3 id="如何离开virtualenv">如何离开virtualenv<a href="#如何离开virtualenv" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/990754/how-to-leave-a-python-virtualenv">链接</a></p>
<p>使用virtualenv时</p>
<pre><code>me@mymachine:~$ workon env1
(env1)me@mymachine:~$ workon env2
(env2)me@mymachine:~$ workon env1
(env1)me@mymachine:~$
</code></pre>
<p>如何退出某个环境</p>
<pre><code>$ deactivate
</code></pre>
<h3 id="如何认为地抛出一个异常">如何认为地抛出一个异常<a href="#如何认为地抛出一个异常" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/2052390/how-do-i-manually-throw-raise-an-exception-in-python">链接</a></p>
<p>pythonic</p>
<pre><code>raise Exception(&quot;I know python!&quot;)
</code></pre>
<p>更多可参考 <a href="http://docs.python.org/2/reference/simple_stmts.html#the-raise-statement">文档</a></p>
<h3 id="在python中如何展示二进制字面值">在Python中如何展示二进制字面值<a href="#在python中如何展示二进制字面值" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1476/how-do-you-express-binary-literals-in-python">链接</a></p>
<p>十六进制可以</p>
<pre><code>&gt;&gt;&gt; 0x12AF
4783
&gt;&gt;&gt; 0x100
256
</code></pre>
<p>八进制可以</p>
<pre><code>&gt;&gt;&gt; 01267
695
&gt;&gt;&gt; 0100
64
</code></pre>
<p>二进制如何表示？</p>
<p>Python 2.5 及更早版本: 可以表示为 int(&lsquo;01010101111&rsquo;,2)  但没有字面量</p>
<p>Python 2.6 beta: 可以使用0b1100111 or 0B1100111 表示</p>
<p>Python 2.6 beta: 也可以使用 0o27 or 0O27 (第二字字符是字母 O)</p>
<p>Python 3.0 beta: 同2.6，但不支持027这种语法</p>
<h3 id="python中检查类型的权威方法">Python中检查类型的权威方法<a href="#python中检查类型的权威方法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/152580/whats-the-canonical-way-to-check-for-type-in-python">链接</a></p>
<p>检查一个对象是否是给定类型或者对象是否继承于给定类型？</p>
<p>比如给定一个对象o,如何判断是不是一个str</p>
<p>检查是否是str</p>
<pre><code>type(o) is str
</code></pre>
<p>检查是否是str或者str的子类</p>
<pre><code>isinstance(o, str)
</code></pre>
<p>下面的方法在某些情况下有用</p>
<pre><code>issubclass(type(o), str)
type(o) in ([str] + str.__subclasses__())
</code></pre>
<p>注意，你或许想要的是</p>
<pre><code>isinstance(o, basestring)
</code></pre>
<p>因为unicode字符串可以满足判定(unicode 不是str的子类，但是str和unicode都是basestring的子类)</p>
<p>可选的，isinstance可以接收多个类型参数，只要满足其中一个即True</p>
<pre><code>isinstance(o, (str, unicode))
</code></pre>
<h3 id="如何获取python的site-packages目录位置">如何获取Python的site-packages目录位置<a href="#如何获取python的site-packages目录位置" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/122327/how-do-i-find-the-location-of-my-python-site-packages-directory">链接</a></p>
<p>参考 <a href="http://docs.djangoproject.com/en/dev/topics/install/#remove-any-old-versions-of-django">How to Install Django&quot; documentation</a></p>
<p>可以在shell中执行</p>
<pre><code>python -c &quot;from distutils.sysconfig import get_python_lib; print(get_python_lib())&quot;
</code></pre>
<p>更好的可读性</p>
<pre><code>from distutils.sysconfig import get_python_lib
print(get_python_lib())
</code></pre>
<h3 id="python中和的作用">Python中**和*的作用<a href="#python中和的作用" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题  <a href="http://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-python-parameters">链接</a></p>
<p>*args和**kwargs允许函数拥有任意数量的参数，具体可以查看 <a href="http://docs.python.org/dev/tutorial/controlflow.html#more-on-defining-functions">more on defining functions</a></p>
<p>*args将函数所有参数转为序列</p>
<pre><code>In [1]: def foo(*args):
...:     for a in args:
...:         print a
...:
...:

In [2]: foo(1)
1


In [4]: foo(1,2,3)
1
2
3
</code></pre>
<p>**kwargs 将函数所有关键字参数转为一个字典</p>
<pre><code>In [5]: def bar(**kwargs):
...:     for a in kwargs:
...:         print a, kwargs[a]
...:
...:

In [6]: bar(name=&quot;one&quot;, age=27)
age 27
name one
</code></pre>
<p>两种用法可以组合使用</p>
<pre><code>def foo(kind, *args, **kwargs):
    pass
</code></pre>
<p>*l的另一个用法是用于函数调用时的参数列表解包(unpack)</p>
<pre><code>In [9]: def foo(bar, lee):
...:     print bar, lee
...:
...:

In [10]: l = [1,2]

In [11]: foo(*l)
1 2
</code></pre>
<p>在Python3.0中，可以将*l放在等号左边用于赋值  <a href="http://www.python.org/dev/peps/pep-3132/">Extended Iterable Unpacking</a></p>
<pre><code>first, *rest = [1,2,3,4]
first, *l, last = [1,2,3,4]
</code></pre>
<h3 id="字符串格式化--vs-format">字符串格式化 % vs format<a href="#字符串格式化--vs-format" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/5082452/python-string-formatting-vs-format">链接</a></p>
<p>Python2.6中引入string.format()方法，语法和原先%操作符的字符串格式化差异较大</p>
<p>在什么情况下使用哪种更好?</p>
<p>以下的输出是一致的，有什么区别</p>
<pre><code>#!/usr/bin/python
sub1 = &quot;python string!&quot;
sub2 = &quot;an arg&quot;

a = &quot;i am a %s&quot;%sub1
b = &quot;i am a {0}&quot;.format(sub1)

c = &quot;with %(kwarg)s!&quot;%{'kwarg':sub2}
d = &quot;with {kwarg}!&quot;.format(kwarg=sub2)

print a
print b
print c
print d
</code></pre>
<p>.format 看起来更加强大，可以用在很多情况.</p>
<p>例如你可以在格式化时重用传入的参数,而你用%时无法做到这点</p>
<p>另一个比较讨厌的是，%只处理 一个变量或一个元组, 你或许会认为下面的语法是正确的</p>
<pre><code>&quot;hi there %s&quot; % name
</code></pre>
<p>但当name恰好是(1,2,3)时，会抛出TypeError异常.为了保证总是正确的，你必须这么写</p>
<pre><code>&quot;hi there %s&quot; % (name,)   # supply the single argument as a single-item tuple
</code></pre>
<p>这么写很丑陋， .format没有这些问题</p>
<p>什么时候不考虑使用.format</p>
<pre><code>你对.format知之甚少
使用Python2.5
</code></pre>
<h3 id="python中什么项目结构更好">Python中什么项目结构更好<a href="#python中什么项目结构更好" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/193161/what-is-the-best-project-structure-for-a-python-application">链接</a></p>
<p>假设你要开发一个较大的客户端程序(非web端),如何组织项目目录和递归？</p>
<p>不要太在意这个.按你高兴的方式组织就行.Python项目很简单，所以没有那么多愚蠢的规则</p>
<pre><code>/scripts or /bin  命令行脚本
/tests 测试
/lib C-语言包
/doc 文档
/apidoc api文档
</code></pre>
<p>并且顶层目录包含README和Config</p>
<p>难以抉择的是，是否使用/src树. /src,/lib,/bin在Python中没有明显的区别，和Java/c不同</p>
<p>因为顶层/src文件夹显得没有什么实际意义，你的顶层目录可以是程序顶层架构的目录</p>
<pre><code>/foo
/bar
/baz
</code></pre>
<p>我建议将这些文件放入到&quot;模块名&quot;的目录中，这样，如果你在写一个应用叫做quux, /quux目录将包含所有这些东西</p>
<p>你可以在PYTHONPATH中加入 /path/to/quux/foo,这样你可以QUUX.foo中重用模块</p>
<p>另一个回答</p>
<pre><code>Project/
|-- bin/
|   |-- project
|
|-- project/
|   |-- test/
|   |   |-- __init__.py
|   |   |-- test_main.py
|   |
|   |-- __init__.py
|   |-- main.py
|
|-- setup.py
|-- README
</code></pre>
<h3 id="argparse可选位置参数">argparse可选位置参数<a href="#argparse可选位置参数" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/4480075/argparse-optional-positional-arguments">链接</a></p>
<p>脚本运行 usage: installer.py dir [-h] [-v]</p>
<p>dir是一个位置参数，定义如下</p>
<pre><code>parser.add_argument('dir', default=os.getcwd())
</code></pre>
<p>我想让dir变为可选，如果未设置，使用os.getcwd()</p>
<p>不幸的是，当我不指定dir时，得到错误 &ldquo;Error: Too few arguments&rdquo;</p>
<p>尝试使用 nargs=&rsquo;?&rsquo;</p>
<pre><code>parser.add_argument('dir', nargs='?', default=os.getcwd())
</code></pre>
<p>例子</p>
<pre><code>&gt;&gt;&gt; import os, argparse
&gt;&gt;&gt; parser = argparse.ArgumentParser()
&gt;&gt;&gt; parser.add_argument('-v', action='store_true')
_StoreTrueAction(option_strings=['-v'], dest='v', nargs=0, const=True, default=False, type=None, choices=None, help=None, metavar=None)
&gt;&gt;&gt; parser.add_argument('dir', nargs='?', default=os.getcwd())
_StoreAction(option_strings=[], dest='dir', nargs='?', const=None, default='/home/vinay', type=None, choices=None, help=None, metavar=None)
&gt;&gt;&gt; parser.parse_args('somedir -v'.split())
Namespace(dir='somedir', v=True)
&gt;&gt;&gt; parser.parse_args('-v'.split())
Namespace(dir='/home/vinay', v=True)
&gt;&gt;&gt; parser.parse_args(''.split())
Namespace(dir='/home/vinay', v=False)
&gt;&gt;&gt; parser.parse_args(['somedir'])
Namespace(dir='somedir', v=False)
&gt;&gt;&gt; parser.parse_args('somedir -h -v'.split())
usage: [-h] [-v] [dir]

positional arguments:
dir

optional arguments:
-h, --help  show this help message and exit
-v
</code></pre>
<h3 id="python中-__new__-和-__init__的用法">Python中 <strong>new</strong> 和 __init__的用法<a href="#python中-__new__-和-__init__的用法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/674304/pythons-use-of-new-and-init">链接</a></p>
<p>我很疑惑，为何__init__总是在__new__之后调用</p>
<p>如下</p>
<pre><code>class A(object):
    _dict = dict()

    def __new__(cls):
        if 'key' in A._dict:
            print &quot;EXISTS&quot;
            return A._dict['key']
        else:
            print &quot;NEW&quot;
            return super(A, cls).__new__(cls)

    def __init__(self):
        print &quot;INIT&quot;
        A._dict['key'] = self
        print &quot;&quot;

a1 = A()
a2 = A()
a3 = A()
</code></pre>
<p>输出</p>
<pre><code>NEW
INIT

EXISTS
INIT

EXISTS
INIT
</code></pre>
<p>有木有人可以解释一下</p>
<p>来自 <a href="http://mail.python.org/pipermail/tutor/2008-April/061426.html">链接</a></p>
<p>使用__new__,当你需要控制一个实例的生成</p>
<p>使用__init__,当你需要控制一个实例的初始化</p>
<p>__new__是实例创建的第一步.最先被调用，并且负责返回类的一个新实例.</p>
<p>相反的,__init__不返回任何东西，只是负责在实例创建后进行初始化</p>
<p>通常情况下，你不必重写__new__除非你写一个子类继承不可变类型，例如str,int,unicode或tuple</p>
<p>你必须了解到，你尝试去做的用<a href="http://en.wikipedia.org/wiki/Factory_object">Factory</a>可以很好地解决，并且是最好的解决方式.使用__new__不是一个简洁的处理方式,一个<a href="http://code.activestate.com/recipes/86900/">factory例子</a></p>
<h3 id="python-self-解释">Python &lsquo;self&rsquo; 解释<a href="#python-self-解释" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/2709821/python-self-explained">链接</a></p>
<p>self关键字的作用是什么？
我理解他用户在创建class时具体化实例，但我无法理解为何需要给每个方法加入self作为参数.</p>
<p>举例，在ruby中，我这么做:</p>
<pre><code>class myClass
    def myFunc(name)
        @name = name
    end
end
</code></pre>
<p>我可以很好地理解，非常简单.但是在Python中，我需要去加入self:</p>
<pre><code>class myClass:
    def myFunc(self, name):
        self.name = name
</code></pre>
<p>有谁能解释下么？</p>
<p>使用self关键字的原因是，Python没有@语法用于引用实例属性.Python决定用一种方式声明方法:实例对象自动传递给属于它的方法,但不是接收自动化：方法的第一个参数是调用这个方法的实例对象本身.这使得方法整个同函数一致,并且由你自己决定真实的名（虽然self是约定，但当你使用其他名的时候，通常人们并不乐意接受）.self对于代码不是特殊的，只是另一个对象.</p>
<p>Python本来可以做一些用来区分真实的名字和属性的区别 —— 像Ruby有的特殊语法，或者像C++/Java的命令声明,或者其他可能的的语法 —— 但是Python没有这么做.Python致力于使事情变得明确简单，让事情是其本身，虽然并不是全部地方都这么做，但是实例属性石这么做的！这就是为什么给一个实例属性赋值时需要知道是给哪个实例赋值,并且，这就是为什么需要self</p>
<p>举例</p>
<pre><code>class Vector(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y
    def length(self):
        return math.sqrt(self.x ** 2 + self.y ** 2)
</code></pre>
<p>等价于</p>
<pre><code>def length_global(vector):
    return math.sqrt(vector.x ** 2 + vector.y ** 2)
</code></pre>
<p>另外</p>
<pre><code>v_instance.length()
转为
Vector.length(v_instance)
</code></pre>
<h3 id="为什么python的private方法并不是真正的私有方法">为什么Python的&rsquo;private&rsquo;方法并不是真正的私有方法<a href="#为什么python的private方法并不是真正的私有方法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/70528/why-are-pythons-private-methods-not-actually-private">链接</a></p>
<p>Python允许我们创建&rsquo;private&rsquo; 函数：变量以两个下划线开头，像这样： <em>__myPrivateMethod()</em>.
但是，如何解释：</p>
<pre><code>&gt;&gt;&gt; class MyClass:
...     def myPublicMethod(self):
...             print 'public method'
...     def __myPrivateMethod(self):
...             print 'this is private!!'
...
&gt;&gt;&gt; obj = MyClass()
&gt;&gt;&gt; obj.myPublicMethod()
public method
&gt;&gt;&gt; obj.__myPrivateMethod()
Traceback (most recent call last):
File &quot;&quot;, line 1, in
AttributeError: MyClass instance has no attribute '__myPrivateMethod'
&gt;&gt;&gt; dir(obj)
['_MyClass__myPrivateMethod', '__doc__', '__module__', 'myPublicMethod']
&gt;&gt;&gt; obj._MyClass__myPrivateMethod()
this is private!!
</code></pre>
<p>dir(obj) 和 obj._MyClass__myPrivateMethod()</p>
<p>回答</p>
<p>‘private&rsquo;只是用作，确保子类不会意外覆写父类的私有方法和属性.不是为了保护外部意外访问而设计的！</p>
<p>例如:</p>
<pre><code>&gt;&gt;&gt; class Foo(object):
...     def __init__(self):
...         self.__baz = 42
...     def foo(self):
...         print self.__baz
...
&gt;&gt;&gt; class Bar(Foo):
...     def __init__(self):
...         super(Bar, self).__init__()
...         self.__baz = 21
...     def bar(self):
...         print self.__baz
...
&gt;&gt;&gt; x = Bar()
&gt;&gt;&gt; x.foo()
42
&gt;&gt;&gt; x.bar()
21
&gt;&gt;&gt; print x.__dict__
{'_Bar__baz': 21, '_Foo__baz': 42}
</code></pre>
<p>当然，这对于两个同名的类没有作用</p>
<p>另外，可以查看diveintopython的解释 <a href="http://www.faqs.org/docs/diveintopython/fileinfo_private.html#d0e11521">入口</a></p>
<h3 id="python中类方法的作用是什么">Python中类方法的作用是什么<a href="#python中类方法的作用是什么" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/38238/what-are-class-methods-in-python-for">链接</a></p>
<p>我现在意识到，我不需要像我在使用java的static方法那样使用类方法，但是我不确定什么时候使用</p>
<p>谁能通过一个好的例子解释下Python中的类方法，至少有人能告诉我什么时候确实需要使用类方法</p>
<p>类方法用在：当你需要使用不属于任何明确实例的方法,但同时必须涉及类.有趣的是，你可以在子类中覆写，这在Java的static方法和Python的模块级别函数中是不可能做到的</p>
<p>如果你有一个MyClass, 并且一个模块级别函数操作MyClass(工厂，依赖注入桩等等), 声明一个类方法.然后这个类方法可以在子类中调用</p>
<h3 id="如何删除一个list中重复的值同时保证原有顺序">如何删除一个list中重复的值同时保证原有顺序<a href="#如何删除一个list中重复的值同时保证原有顺序" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order">链接</a></p>
<p>我是这么做的额</p>
<pre><code>def uniq(input):
output = []
for x in input:
    if x not in output:
    output.append(x)
return output
</code></pre>
<p>有什么更好的方法？</p>
<p>你可以在这里找到一些可用的方法 <a href="http://www.peterbe.com/plog/uniqifiers-benchmark">入口</a></p>
<p>最快的一个</p>
<pre><code>def f7(seq):
    seen = set()
    seen_add = seen.add
    return [ x for x in seq if x not in seen and not seen_add(x)]
</code></pre>
<p>如果你需要在同一个数据集中多次是哦那个这个方法，或许你可以使用ordered set处理 <a href="http://code.activestate.com/recipes/528878/">http://code.activestate.com/recipes/528878/</a></p>
<p>插入，删除和归属判断复杂度都是O(1)</p>
<h3 id="有什么方法可以获取系统当前用户名么">有什么方法可以获取系统当前用户名么?<a href="#有什么方法可以获取系统当前用户名么" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/842059/is-there-a-portable-way-to-get-the-current-username-in-python">链接</a></p>
<p>至少在Linux和Windows下都可用.就像 os.getuid</p>
<pre><code>&gt;&gt;&gt; os.getuid()
42
&gt;&gt;&gt; os.getusername()
'slartibartfast'
</code></pre>
<p>可以看看 <a href="http://docs.python.org/2/library/getpass.html">getpass</a> 模块</p>
<pre><code>&gt;&gt;&gt; import getpass
&gt;&gt;&gt; getpass.getuser()
'kostya'
</code></pre>
<p>可用: Unix, Windows</p>
<h3 id="python-assert最佳实践">Python assert最佳实践<a href="#python-assert最佳实践" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/944592/best-practice-for-python-assert">链接</a></p>
<p>有没有代码实例使用assert作为独立代码，而不是仅用来debug</p>
<pre><code>assert x &gt;= 0, 'x is less than zero'

类似
if x &lt; 0:
    raise Exception, 'x is less than zero'

有什么方法，可以设定一个规则就像 if x \&lt; 0 抛出错误但是不是通过try/except/finally检查的
</code></pre>
<p>搞晕了：</p>
<pre><code>原文 Also, is there any way to set a business rule like if x \&lt; 0 raise error that is always checked without the try/except/finally so, if at anytime throughout the code x is less than 0 an error is raised, like if you set assert x &lt; 0 at the start of a function, anywhere within the function where x becomes less then 0 an exception is raised?
</code></pre>
<p>回答</p>
<p>Assert仅用在，测试那些从不发生的情况！目的是让程序尽早失败</p>
<p>Exception用在，那些可以明确知道会发生的错误，并且建议总是创建自己的异常类</p>
<p>例如，你写一个函数从配置文件中读取配置放入字典，文件格式不正确抛出一个ConfigurationSyntaxError,同时你可以assert返回值非None</p>
<p>在你的例子中，如果x是通过用户接口或外部传递设置的，最好使用exception</p>
<p>如果x仅是同一个程序的内部代码，使用assert</p>
<h3 id="在非创建全局变量的地方使用全局变量">在非创建全局变量的地方使用全局变量<a href="#在非创建全局变量的地方使用全局变量" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them">链接</a></p>
<p>如果我在一个函数中创建了全局变量，如何在另一个函数中使用？</p>
<p>回答：</p>
<p>你可以在给全局变量赋值的函数中声明 global</p>
<pre><code>globvar = 0

def set_globvar_to_one():
    global globvar    # Needed to modify global copy of globvar
    globvar = 1

def print_globvar():
    print globvar     # No need for global declaration to read value of globvar

set_globvar_to_one()
print_globvar()       # Prints 1
</code></pre>
<p>我猜想这么做的原因是，全局变量很危险，Python想要确保你真的知道你要对一个全局的变量进行操作</p>
<p>如果你想知道如何在模块间使用全局变量，查看其他回答</p>
<h3 id="如何在单一表达式中合并两个python字典">如何在单一表达式中合并两个Python字典<a href="#如何在单一表达式中合并两个python字典" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/38987/how-can-i-merge-union-two-python-dictionaries-in-a-single-expression">链接</a></p>
<pre><code>&gt;&gt;&gt; x = {'a':1, 'b': 2}
&gt;&gt;&gt; y = {'b':10, 'c': 11}
&gt;&gt;&gt; z = x.update(y)
&gt;&gt;&gt; print z
None
&gt;&gt;&gt; x
{'a': 1, 'b': 10, 'c': 11}
</code></pre>
<p>我想要最终合并结果在z中，不是x，我要怎么做？</p>
<p>回答</p>
<p>这种情况下，可以使用</p>
<pre><code>z = dict(x.items() + y.items())
</code></pre>
<p>这个表达式将会实现你想要的，最终结果z，并且相同key的值，将会是y中key对应的值</p>
<pre><code>&gt;&gt;&gt; x = {'a':1, 'b': 2}
&gt;&gt;&gt; y = {'b':10, 'c': 11}
&gt;&gt;&gt; z = dict(x.items() + y.items())
&gt;&gt;&gt; z
{'a': 1, 'c': 11, 'b': 10}
</code></pre>
<p>如果在Python3中,会变得有些复杂</p>
<pre><code>&gt;&gt;&gt; z = dict(list(x.items()) + list(y.items()))
&gt;&gt;&gt; z
{'a': 1, 'c': 11, 'b': 10}
</code></pre>
<h3 id="如何使用-pip-更新所有包">如何使用 pip 更新所有包<a href="#如何使用-pip-更新所有包" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/2720014/upgrading-all-packages-with-pip">链接</a></p>
<p>如何使用pip更新python的所有包</p>
<p>没有内置的标志可以实现</p>
<p>但是你可以这么做</p>
<pre><code>pip freeze --local | grep -v '^\-e' | cut -d = -f 1  | xargs pip install -U
</code></pre>
<h3 id="python中声明exception的方法">Python中声明exception的方法<a href="#python中声明exception的方法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1319615/proper-way-to-declare-custom-exceptions-in-modern-python">链接</a></p>
<p>在python2.6中定义异常得到警告</p>
<pre><code>&gt;&gt;&gt; class MyError(Exception):
...     def __init__(self, message):
...         self.message = message
...
&gt;&gt;&gt; MyError(&quot;foo&quot;)
_sandbox.py:3: DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
</code></pre>
<p>问题很长，大意如标题</p>
<p>回答</p>
<p>或许我理解错了，但是为什么不这样做</p>
<pre><code>class MyException(Exception):
    pass
</code></pre>
<p>如果要重写什么，例如传递额外参数，可以这么做</p>
<pre><code>class ValidationError(Exception):
    def __init__(self, message, Errors):

        # Call the base class constructor with the parameters it needs
        Exception.__init__(self, message)

        # Now for your custom code...
        self.Errors = Errors
</code></pre>
<p>你可以通过第二个参数传递error 字典, 之后通过e.Errors获取</p>
<h3 id="在python中使用counter错误">在Python中使用Counter错误<a href="#在python中使用counter错误" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/13311094/counter-in-collections-module-python">链接</a></p>
<p>当使用Counter时，出现异常</p>
<pre><code>AttributeError: 'module' object has no attribute 'Counter'

from collections import Counter
ImportError: cannot import name Counter
</code></pre>
<p>原因：</p>
<p>版本问题，Counter在 python2.7中才被加入到这个模块，你可能使用了Python2.6或更老的版本</p>
<p>可以看下 <a href="http://docs.python.org/2/library/collections.html#collections.Counter">文档</a></p>
<p>如果要在 Python2.6或2.5版本使用，可以看 <a href="http://code.activestate.com/recipes/576611-counter-class/">这里</a></p>
<h3 id="如何删除python-easy_install安装的包">如何删除Python easy_install安装的包<a href="#如何删除python-easy_install安装的包" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1231688/how-do-i-remove-packages-installed-with-pythons-easy-install">链接</a></p>
<p><a href="https://pypi.python.org/pypi/pip/">pip</a>, setuptools/easy_install的另一种选择，提供uninstall命令</p>
<p>首先，移除依赖</p>
<pre><code>$ easy_install -m [PACKAGE]
</code></pre>
<p>然后，手动删除egg文件</p>
<pre><code>$ rm -rf .../python2.X/site-packages/[PACKAGE].egg
</code></pre>
<h3 id="在python中如何解析xml">在Python中如何解析xml<a href="#在python中如何解析xml" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1912434/how-do-i-parse-xml-in-python">链接</a></p>
<pre><code>&lt;foo&gt;
&lt;bar&gt;
    &lt;type foobar=&quot;1&quot;/&gt;
    &lt;type foobar=&quot;2&quot;/&gt;
&lt;/bar&gt;
&lt;/foo&gt;
</code></pre>
<p>如何解析获取xml文件中内容</p>
<p>我建议使用 <a href="http://docs.python.org/2/library/xml.etree.elementtree.html">ElementTree</a> (有其他可用的实现，例如 <a href="http://lxml.de/">lxml</a>，他们只是更快, ElementTree提供更简单的编程api)</p>
<p>在使用XML建立Element实例之后，例如使用 <a href="http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.XML">XML</a> 函数</p>
<pre><code>for atype in e.findall('type')
    print(atype.get('foobar'))
</code></pre>
<h3 id="如何将一个python-timestruct_time对象转换为一个datetime对象">如何将一个Python time.struct_time对象转换为一个datetime对象<a href="#如何将一个python-timestruct_time对象转换为一个datetime对象" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>问题 <a href="http://stackoverflow.com/questions/1697815/how-do-you-convert-a-python-time-struct-time-object-into-a-datetime-object">链接</a></p>
<p>使用 <a href="">time.mktime()</a> 将time元组(本地时间)转成秒， 然后使用 datetime.fromtimestamp() 转成datetime对象</p>
<pre><code>from time import mktime
from datetime import datetime

dt = datetime.fromtimestamp(mktime(struct))
</code></pre>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://wklken.me/tags/pythontranslation">python,translation</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>12491 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2013-07-20 08:00 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc">
			<div class="toc-title">Table of Contents</div>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#基本数据结构列表元组字典等">基本数据结构(列表，元组，字典等)</a>
      <ul>
        <li><a href="#判断一个列表为空得最佳实践">判断一个列表为空得最佳实践</a></li>
        <li><a href="#为什么是stringjoinlist而不是listjoinstring">为什么是string.join(list)而不是list.join(string)</a></li>
        <li><a href="#如何合并两个列表">如何合并两个列表</a></li>
        <li><a href="#如何扁平一个二维数组">如何扁平一个二维数组</a></li>
        <li><a href="#如何获取一个列表的长度">如何获取一个列表的长度</a></li>
        <li><a href="#python中如何复制一个列表">Python中如何复制一个列表</a></li>
        <li><a href="#列表的append和extend的区别">列表的append和extend的区别</a></li>
        <li><a href="#如何随机地从列表中抽取变量">如何随机地从列表中抽取变量</a></li>
        <li><a href="#如何利用下标从列表中删除一个元素">如何利用下标从列表中删除一个元素</a></li>
        <li><a href="#获取列表的最后一个元素">获取列表的最后一个元素</a></li>
        <li><a href="#序列的切片操作">序列的切片操作</a></li>
        <li><a href="#如何将一个列表切分成若干个长度相同的子序列">如何将一个列表切分成若干个长度相同的子序列</a></li>
        <li><a href="#使用列表解析创建一个字典">使用列表解析创建一个字典</a></li>
        <li><a href="#使用in还是has_key">使用&quot;in&quot;还是&quot;has_key()&quot;</a></li>
        <li><a href="#字典默认值">字典默认值</a></li>
        <li><a href="#如何给字典添加一个值">如何给字典添加一个值</a></li>
        <li><a href="#如何将字段转换成一个object然后使用对象-属性的方式读取">如何将字段转换成一个object，然后使用对象-属性的方式读取</a></li>
      </ul>
    </li>
    <li><a href="#字符串文件">字符串，文件</a>
      <ul>
        <li><a href="#字符如何转为小写">字符如何转为小写</a></li>
        <li><a href="#如何创建不存在的目录结构">如何创建不存在的目录结构</a></li>
        <li><a href="#如何拷贝一个文件">如何拷贝一个文件</a></li>
        <li><a href="#字符串转为floatint">字符串转为float/int</a></li>
        <li><a href="#如何反向输出一个字符串">如何反向输出一个字符串</a></li>
        <li><a href="#如何随机生成大写字母和数字组成的字符串">如何随机生成大写字母和数字组成的字符串</a></li>
        <li><a href="#逐行读文件去除换行符perl-chomp-line">逐行读文件去除换行符(perl chomp line)</a></li>
        <li><a href="#python中字符串的contains">python中字符串的contains</a></li>
        <li><a href="#如何判断一个字符串是数字">如何判断一个字符串是数字</a></li>
        <li><a href="#如何填充0到数字字符串中保证统一长度">如何填充0到数字字符串中保证统一长度</a></li>
      </ul>
    </li>
    <li><a href="#控制结构条件循环">控制结构（条件、循环）</a>
      <ul>
        <li><a href="#如何在循环中获取下标">如何在循环中获取下标</a></li>
        <li><a href="#如何判断一个变量的类型">如何判断一个变量的类型</a></li>
      </ul>
    </li>
    <li><a href="#类">类</a>
      <ul>
        <li><a href="#如何判断一个对象是否拥有某个属性">如何判断一个对象是否拥有某个属性</a></li>
        <li><a href="#python中的类变量环境变量">Python中的类变量(环境变量)</a></li>
        <li><a href="#如何定义静态方法static-method">如何定义静态方法(static method)</a></li>
        <li><a href="#staticmethod和classmethod的区别">@staticmethod和@classmethod的区别</a></li>
        <li><a href="#如何获取一个实例的类名">如何获取一个实例的类名</a></li>
      </ul>
    </li>
    <li><a href="#模块">模块</a>
      <ul>
        <li><a href="#如何列出一个目录的所有文件">如何列出一个目录的所有文件</a></li>
        <li><a href="#json和simplejson的区别">json和simplejson的区别</a></li>
        <li><a href="#python中如何获取当前时间">python中如何获取当前时间</a></li>
      </ul>
    </li>
    <li><a href="#其他">其他</a>
      <ul>
        <li><a href="#如何从标准输入读取内容stdin">如何从标准输入读取内容stdin</a></li>
        <li><a href="#foo-is-none-和-foo--none的区别">foo is None 和 foo == None的区别</a></li>
        <li><a href="#__init__py是做什么用的">__init__.py是做什么用的</a></li>
        <li><a href="#如何获取安装的python模块列表">如何获取安装的python模块列表</a></li>
      </ul>
    </li>
    <li><a href="#环境相关">环境相关</a>
      <ul>
        <li><a href="#setuppy安装后如何卸载">setup.py安装后如何卸载</a></li>
      </ul>
    </li>
    <li><a href="#异常">异常</a>
      <ul>
        <li><a href="#如何一行内处理多个异常">如何一行内处理多个异常</a></li>
        <li><a href="#如何flush-python的print输出">如何flush Python的print输出</a></li>
        <li><a href="#如何获取一个函数的函数名字符串">如何获取一个函数的函数名字符串</a></li>
        <li><a href="#应该在学习python3之前学习python2还是直接学习python3">应该在学习Python3之前学习Python2，还是直接学习Python3</a></li>
        <li><a href="#python中用比较字符串is有时候会返回错误判断">python中用==比较字符串，is有时候会返回错误判断</a></li>
        <li><a href="#如何截取一个字符串获得子串">如何截取一个字符串获得子串</a></li>
        <li><a href="#用函数名字符串调用一个函数">用函数名字符串调用一个函数</a></li>
        <li><a href="#如何获取文件扩展名">如何获取文件扩展名</a></li>
        <li><a href="#如何获取list中包含某个元素所在的下标">如何获取list中包含某个元素所在的下标</a></li>
        <li><a href="#如何截掉空格包括tab">如何截掉空格（包括tab)</a></li>
        <li><a href="#如何将一个十六进制字符串转为整数">如何将一个十六进制字符串转为整数</a></li>
        <li><a href="#如何结束退出一个python脚本">如何结束退出一个python脚本</a></li>
        <li><a href="#如何往文件中追加文本">如何往文件中追加文本</a></li>
        <li><a href="#如何使用不同分隔符切分字符串">如何使用不同分隔符切分字符串</a></li>
        <li><a href="#如何获取一个字符的ascii码">如何获取一个字符的ASCII码</a></li>
        <li><a href="#排序一个列表中的所有dict根据dict内值">排序一个列表中的所有dict，根据dict内值</a></li>
        <li><a href="#读文件到列表中">读文件到列表中</a></li>
        <li><a href="#如何用http下载一个文件">如何用http下载一个文件</a></li>
        <li><a href="#在virtualenv中如何使用不同的python版本">在virtualenv中如何使用不同的python版本</a></li>
        <li><a href="#python中如何将一行长代码切成多行">python中如何将一行长代码切成多行</a></li>
        <li><a href="#如何找到一个目录下所有txt文件">如何找到一个目录下所有.txt文件</a></li>
        <li><a href="#如何使用绝对路径import一个模块">如何使用绝对路径import一个模块</a></li>
        <li><a href="#如何在遍历一个list时删除某些玄素">如何在遍历一个list时删除某些玄素</a></li>
        <li><a href="#如何强制使用浮点数除法">如何强制使用浮点数除法</a></li>
        <li><a href="#如何映射两个列表成为一个字典">如何映射两个列表成为一个字典</a></li>
        <li><a href="#找到当前目录及文件所在目录">找到当前目录及文件所在目录</a></li>
        <li><a href="#为何1-in-10--true执行结果是false">为何1 in [1,0] == True执行结果是False</a></li>
        <li><a href="#python中的switch替代语法">Python中的switch替代语法</a></li>
        <li><a href="#如何将字符串转换为datetime">如何将字符串转换为datetime</a></li>
        <li><a href="#python中有没有简单优雅的方式定义单例类">Python中有没有简单优雅的方式定义单例类</a></li>
        <li><a href="#将一个字符串转为一个字典">将一个字符串转为一个字典</a></li>
        <li><a href="#python如何检查一个对象是list或者tuple但是不是一个字符串">Python如何检查一个对象是list或者tuple，但是不是一个字符串</a></li>
        <li><a href="#使用-if-x-is-not-none-还是if-not-x-is-none">使用 &lsquo;if x is not None&rsquo; 还是&rsquo;if not x is None&rsquo;</a></li>
        <li><a href="#如何获取一个文件的创建和修改时间">如何获取一个文件的创建和修改时间</a></li>
        <li><a href="#如何离开virtualenv">如何离开virtualenv</a></li>
        <li><a href="#如何认为地抛出一个异常">如何认为地抛出一个异常</a></li>
        <li><a href="#在python中如何展示二进制字面值">在Python中如何展示二进制字面值</a></li>
        <li><a href="#python中检查类型的权威方法">Python中检查类型的权威方法</a></li>
        <li><a href="#如何获取python的site-packages目录位置">如何获取Python的site-packages目录位置</a></li>
        <li><a href="#python中和的作用">Python中**和*的作用</a></li>
        <li><a href="#字符串格式化--vs-format">字符串格式化 % vs format</a></li>
        <li><a href="#python中什么项目结构更好">Python中什么项目结构更好</a></li>
        <li><a href="#argparse可选位置参数">argparse可选位置参数</a></li>
        <li><a href="#python中-__new__-和-__init__的用法">Python中 <strong>new</strong> 和 __init__的用法</a></li>
        <li><a href="#python-self-解释">Python &lsquo;self&rsquo; 解释</a></li>
        <li><a href="#为什么python的private方法并不是真正的私有方法">为什么Python的&rsquo;private&rsquo;方法并不是真正的私有方法</a></li>
        <li><a href="#python中类方法的作用是什么">Python中类方法的作用是什么</a></li>
        <li><a href="#如何删除一个list中重复的值同时保证原有顺序">如何删除一个list中重复的值同时保证原有顺序</a></li>
        <li><a href="#有什么方法可以获取系统当前用户名么">有什么方法可以获取系统当前用户名么?</a></li>
        <li><a href="#python-assert最佳实践">Python assert最佳实践</a></li>
        <li><a href="#在非创建全局变量的地方使用全局变量">在非创建全局变量的地方使用全局变量</a></li>
        <li><a href="#如何在单一表达式中合并两个python字典">如何在单一表达式中合并两个Python字典</a></li>
        <li><a href="#如何使用-pip-更新所有包">如何使用 pip 更新所有包</a></li>
        <li><a href="#python中声明exception的方法">Python中声明exception的方法</a></li>
        <li><a href="#在python中使用counter错误">在Python中使用Counter错误</a></li>
        <li><a href="#如何删除python-easy_install安装的包">如何删除Python easy_install安装的包</a></li>
        <li><a href="#在python中如何解析xml">在Python中如何解析xml</a></li>
        <li><a href="#如何将一个python-timestruct_time对象转换为一个datetime对象">如何将一个Python time.struct_time对象转换为一个datetime对象</a></li>
      </ul>
    </li>
  </ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://wklken.me/posts/2013/08/04/translation-vim-introduction-and-tutorial.html">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>[翻译]vim入门指南</span>
			</a>
			<a class="prev-post" href="https://wklken.me/posts/2013/07/19/python-translate-decorator.html">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>[翻译]理解python中的装饰器</span>
			</a>
		</div>
		<div id="comments" class="thin">
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://wklken.me/js/md5.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: '549d325e74a413f1b56a',
    clientSecret: '086a83faacf152cc3f4079f002058716879e9688',
    repo: 'wklken.github.io',
    owner: 'wklken',
    admin: ['wklken'],
    id: md5(location.pathname), 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>

</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2022 <a href="https://wklken.me">wklken</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://wklken.me/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="https://wklken.me/js/bundle.min.580988ed2982bcbb74a1773c7abea97b43e4c43b9324e10cda0813ec6ec4bb67.js" integrity="sha256-WAmI7SmCvLt0oXc8er6pe0PkxDuTJOEM2ggT7G7Eu2c=" crossorigin="anonymous"></script>
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-42275748-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>

</html>
